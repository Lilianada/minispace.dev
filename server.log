
> minispace.dev@0.1.0 dev
> next dev --turbopack

   ‚ñ≤ Next.js 15.3.2 (Turbopack)
   - Local:        http://localhost:3000
   - Network:      http://192.168.1.3:3000
   - Environments: .env.local, .env

 ‚úì Starting...
 ‚úì Compiled middleware in 212ms
 ‚úì Ready in 1529ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: demouser.localhost:3000
    - Pathname: /posts
    - Headers: {
  "connection": "keep-alive",
  "host": "demouser.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/posts
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /demouser/posts
      - Full new URL: http://localhost:3000/demouser/posts
 ‚óã Compiling /[username]/posts ...
 ‚úì Compiled /[username]/posts in 3.4s
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: demouser.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /posts 200 in 5061ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/demouser/posts
    - Hostname: localhost:3000
    - Pathname: /demouser/posts
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/demouser/posts",
    "normalizedPath": "/demouser/posts",
    "pathSegments": [
      "demouser",
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/demouser/posts
Main localhost domain detected, no rewrite needed
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: false
[Posts Page] Request details:
    - Username: demouser
    - Host: localhost:3000
    - Is subdomain (detected): false
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: localhost:3000
        - Is subdomain: false
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /demouser/
  4. /demouser/posts
  5. /demouser/about
  6. /demouser/post/dev-mode
  7. /demouser/post/firebase-admin-nextjs
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: false
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: false
    - HTML length: 3477
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /demouser/
    /demouser/posts
    /demouser/about
    /demouser/post/dev-mode
    /demouser/post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/demouser/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/post/dev-mode"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/post/firebase-admin-nextjs"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/demouser/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /demouser/themes/altay/theme.css
  3. /demouser/
  4. /demouser/posts
  5. /demouser/about
  6. /demouser/post/dev-mode
  7. /demouser/post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3629 bytes
 GET /demouser/posts 200 in 52ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: test.localhost:3000
    - Pathname: /posts
    - Headers: {
  "connection": "keep-alive",
  "host": "test.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "test.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "test",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "test.localhost:3000",
    "domainParts": [
      "test",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: test.localhost:3000/posts
[Middleware] Is subdomain check: test.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: test
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /test/posts
      - Full new URL: http://localhost:3000/test/posts
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: test
    - Host: test.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: test
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: test
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: test
    - Host: test.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: test.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: test
        - Host: test.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: test
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: test's Blog
        - Username: test
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: test
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: test
    - Is subdomain: true
    - HTML length: 3416
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>test&#39;s Blog</t...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/test(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3554 bytes
 GET /posts 200 in 40ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/test/posts
    - Hostname: localhost:3000
    - Pathname: /test/posts
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "test",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/test/posts",
    "normalizedPath": "/test/posts",
    "pathSegments": [
      "test",
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/test/posts
Main localhost domain detected, no rewrite needed
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: test
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: test
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: test
    - Current page: posts
    - Is subdomain: false
[Posts Page] Request details:
    - Username: test
    - Host: localhost:3000
    - Is subdomain (detected): false
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: test
        - Host: localhost:3000
        - Is subdomain: false
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: test
        - Current page: posts
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: test's Blog
        - Username: test
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /test/
  4. /test/posts
  5. /test/about
  6. /test/post/dev-mode
  7. /test/post/firebase-admin-nextjs
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: test
        - Is subdomain: false
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: test
    - Is subdomain: false
    - HTML length: 3441
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>test&#39;s Blog</t...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /test/
    /test/posts
    /test/about
    /test/post/dev-mode
    /test/post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/test/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/test/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/test/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/test/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/test/post/dev-mode"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/test/post/firebase-admin-nextjs"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/test/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /test/themes/altay/theme.css
  3. /test/
  4. /test/posts
  5. /test/about
  6. /test/post/dev-mode
  7. /test/post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3585 bytes
 GET /test/posts 200 in 52ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: admin.localhost:3000
    - Pathname: /posts
    - Headers: {
  "connection": "keep-alive",
  "host": "admin.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "admin.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "admin",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "admin.localhost:3000",
    "domainParts": [
      "admin",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: admin.localhost:3000/posts
[Middleware] Is subdomain check: admin.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Skipping special subdomain: admin
 ‚óã Compiling /[username] ...
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
 ‚úì Compiled /[username] in 1715ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: posts
    - Host header: admin.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "admin.localhost:3000",
  "connection": "keep-alive",
  "x-forwarded-host": "admin.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::ffff:127.0.0.1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: posts
    - Host: admin.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: posts
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: posts
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for posts
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: posts
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Posts
        - Username: posts
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /posts/
  4. /posts/posts
  5. /posts/about
  6. /posts/post/welcome
  7. /posts/post/getting-started
  8. /posts/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: posts
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: posts
    - Is subdomain: false
    - HTML length: 3900
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Posts</title>
    ...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /posts/
    /posts/posts
    /posts/about
    /posts/post/welcome
    /posts/post/getting-started
    /posts/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/posts/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/posts/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/posts/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/posts/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/posts/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/posts/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/posts/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/posts/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /posts/themes/altay/theme.css
  3. /posts/
  4. /posts/posts
  5. /posts/about
  6. /posts/post/welcome
  7. /posts/post/getting-started
  8. /posts/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4045 bytes
 GET /posts 200 in 2261ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/admin/posts
    - Hostname: localhost:3000
    - Pathname: /admin/posts
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "admin",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/admin/posts",
    "normalizedPath": "/admin/posts",
    "pathSegments": [
      "admin",
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/admin/posts
Main localhost domain detected, no rewrite needed
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: admin
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: admin
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: admin
    - Current page: posts
    - Is subdomain: false
[Posts Page] Request details:
    - Username: admin
    - Host: localhost:3000
    - Is subdomain (detected): false
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: admin
        - Host: localhost:3000
        - Is subdomain: false
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: admin
        - Current page: posts
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: admin's Blog
        - Username: admin
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /admin/
  4. /admin/posts
  5. /admin/about
  6. /admin/post/dev-mode
  7. /admin/post/firebase-admin-nextjs
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: admin
        - Is subdomain: false
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: admin
    - Is subdomain: false
    - HTML length: 3450
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>admin&#39;s Blog</...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /admin/
    /admin/posts
    /admin/about
    /admin/post/dev-mode
    /admin/post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/admin/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/admin/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/admin/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/admin/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/admin/post/dev-mode"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/admin/post/firebase-admin-nextjs"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/admin/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /admin/themes/altay/theme.css
  3. /admin/
  4. /admin/posts
  5. /admin/about
  6. /admin/post/dev-mode
  7. /admin/post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3596 bytes
 GET /admin/posts 200 in 41ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: dev.localhost:3000
    - Pathname: /posts
    - Headers: {
  "connection": "keep-alive",
  "host": "dev.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "dev.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "dev.localhost:3000",
    "domainParts": [
      "dev",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: dev.localhost:3000/posts
[Middleware] Is subdomain check: dev.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: dev
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /dev/posts
      - Full new URL: http://localhost:3000/dev/posts
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: dev
    - Host: dev.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: dev
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: dev
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: dev
    - Host: dev.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: dev.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: dev
        - Host: dev.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: dev
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: dev's Blog
        - Username: dev
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: dev
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: dev
    - Is subdomain: true
    - HTML length: 3412
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>dev&#39;s Blog</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/dev(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3549 bytes
 GET /posts 200 in 66ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/dev/posts
    - Hostname: localhost:3000
    - Pathname: /dev/posts
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/dev/posts",
    "normalizedPath": "/dev/posts",
    "pathSegments": [
      "dev",
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/dev/posts
Main localhost domain detected, no rewrite needed
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: dev
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: dev
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: dev
    - Current page: posts
    - Is subdomain: false
[Posts Page] Request details:
    - Username: dev
    - Host: localhost:3000
    - Is subdomain (detected): false
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: dev
        - Host: localhost:3000
        - Is subdomain: false
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: dev
        - Current page: posts
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: dev's Blog
        - Username: dev
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /dev/
  4. /dev/posts
  5. /dev/about
  6. /dev/post/dev-mode
  7. /dev/post/firebase-admin-nextjs
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: dev
        - Is subdomain: false
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: dev
    - Is subdomain: false
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>dev&#39;s Blog</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /dev/
    /dev/posts
    /dev/about
    /dev/post/dev-mode
    /dev/post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/dev/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/post/dev-mode"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/post/firebase-admin-nextjs"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/dev/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /dev/themes/altay/theme.css
  3. /dev/
  4. /dev/posts
  5. /dev/about
  6. /dev/post/dev-mode
  7. /dev/post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /dev/posts 200 in 51ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: demouser.localhost:3000
    - Pathname: /posts
    - Headers: {
  "connection": "keep-alive",
  "host": "demouser.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/posts
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /demouser/posts
      - Full new URL: http://localhost:3000/demouser/posts
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: demouser.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /posts 200 in 112ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/demouser/posts
    - Hostname: localhost:3000
    - Pathname: /demouser/posts
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/demouser/posts",
    "normalizedPath": "/demouser/posts",
    "pathSegments": [
      "demouser",
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/demouser/posts
Main localhost domain detected, no rewrite needed
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: false
[Posts Page] Request details:
    - Username: demouser
    - Host: localhost:3000
    - Is subdomain (detected): false
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: localhost:3000
        - Is subdomain: false
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /demouser/
  4. /demouser/posts
  5. /demouser/about
  6. /demouser/post/dev-mode
  7. /demouser/post/firebase-admin-nextjs
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: false
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: false
    - HTML length: 3477
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /demouser/
    /demouser/posts
    /demouser/about
    /demouser/post/dev-mode
    /demouser/post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/demouser/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/post/dev-mode"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/post/firebase-admin-nextjs"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/demouser/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /demouser/themes/altay/theme.css
  3. /demouser/
  4. /demouser/posts
  5. /demouser/about
  6. /demouser/post/dev-mode
  7. /demouser/post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3629 bytes
 GET /demouser/posts 200 in 62ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: test.localhost:3000
    - Pathname: /posts
    - Headers: {
  "connection": "keep-alive",
  "host": "test.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "test.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "test",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "test.localhost:3000",
    "domainParts": [
      "test",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: test.localhost:3000/posts
[Middleware] Is subdomain check: test.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: test
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /test/posts
      - Full new URL: http://localhost:3000/test/posts
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: test
    - Host: test.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: test
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: test
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: test
    - Host: test.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: test.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: test
        - Host: test.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: test
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: test's Blog
        - Username: test
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: test
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: test
    - Is subdomain: true
    - HTML length: 3416
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>test&#39;s Blog</t...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/test(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3554 bytes
 GET /posts 200 in 41ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/test/posts
    - Hostname: localhost:3000
    - Pathname: /test/posts
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "test",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/test/posts",
    "normalizedPath": "/test/posts",
    "pathSegments": [
      "test",
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/test/posts
Main localhost domain detected, no rewrite needed
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: test
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: test
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: test
    - Current page: posts
    - Is subdomain: false
[Posts Page] Request details:
    - Username: test
    - Host: localhost:3000
    - Is subdomain (detected): false
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: test
        - Host: localhost:3000
        - Is subdomain: false
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: test
        - Current page: posts
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: test's Blog
        - Username: test
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /test/
  4. /test/posts
  5. /test/about
  6. /test/post/dev-mode
  7. /test/post/firebase-admin-nextjs
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: test
        - Is subdomain: false
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: test
    - Is subdomain: false
    - HTML length: 3441
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>test&#39;s Blog</t...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /test/
    /test/posts
    /test/about
    /test/post/dev-mode
    /test/post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/test/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/test/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/test/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/test/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/test/post/dev-mode"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/test/post/firebase-admin-nextjs"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/test/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /test/themes/altay/theme.css
  3. /test/
  4. /test/posts
  5. /test/about
  6. /test/post/dev-mode
  7. /test/post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3585 bytes
 GET /test/posts 200 in 53ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: admin.localhost:3000
    - Pathname: /posts
    - Headers: {
  "connection": "keep-alive",
  "host": "admin.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "admin.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "admin",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "admin.localhost:3000",
    "domainParts": [
      "admin",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: admin.localhost:3000/posts
[Middleware] Is subdomain check: admin.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Skipping special subdomain: admin
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: posts
    - Host header: admin.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "admin.localhost:3000",
  "connection": "keep-alive",
  "x-forwarded-host": "admin.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::ffff:127.0.0.1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: posts
    - Host: admin.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: posts
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: posts
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for posts
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: posts
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Posts
        - Username: posts
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /posts/
  4. /posts/posts
  5. /posts/about
  6. /posts/post/welcome
  7. /posts/post/getting-started
  8. /posts/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: posts
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: posts
    - Is subdomain: false
    - HTML length: 3900
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Posts</title>
    ...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /posts/
    /posts/posts
    /posts/about
    /posts/post/welcome
    /posts/post/getting-started
    /posts/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/posts/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/posts/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/posts/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/posts/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/posts/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/posts/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/posts/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/posts/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /posts/themes/altay/theme.css
  3. /posts/
  4. /posts/posts
  5. /posts/about
  6. /posts/post/welcome
  7. /posts/post/getting-started
  8. /posts/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4045 bytes
 GET /posts 200 in 44ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/admin/posts
    - Hostname: localhost:3000
    - Pathname: /admin/posts
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "admin",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/admin/posts",
    "normalizedPath": "/admin/posts",
    "pathSegments": [
      "admin",
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/admin/posts
Main localhost domain detected, no rewrite needed
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: admin
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: admin
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: admin
    - Current page: posts
    - Is subdomain: false
[Posts Page] Request details:
    - Username: admin
    - Host: localhost:3000
    - Is subdomain (detected): false
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: admin
        - Host: localhost:3000
        - Is subdomain: false
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: admin
        - Current page: posts
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: admin's Blog
        - Username: admin
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /admin/
  4. /admin/posts
  5. /admin/about
  6. /admin/post/dev-mode
  7. /admin/post/firebase-admin-nextjs
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: admin
        - Is subdomain: false
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: admin
    - Is subdomain: false
    - HTML length: 3450
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>admin&#39;s Blog</...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /admin/
    /admin/posts
    /admin/about
    /admin/post/dev-mode
    /admin/post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/admin/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/admin/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/admin/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/admin/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/admin/post/dev-mode"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/admin/post/firebase-admin-nextjs"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/admin/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /admin/themes/altay/theme.css
  3. /admin/
  4. /admin/posts
  5. /admin/about
  6. /admin/post/dev-mode
  7. /admin/post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3596 bytes
 GET /admin/posts 200 in 80ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: dev.localhost:3000
    - Pathname: /posts
    - Headers: {
  "connection": "keep-alive",
  "host": "dev.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "dev.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "dev.localhost:3000",
    "domainParts": [
      "dev",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: dev.localhost:3000/posts
[Middleware] Is subdomain check: dev.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: dev
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /dev/posts
      - Full new URL: http://localhost:3000/dev/posts
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: dev
    - Host: dev.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: dev
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: dev
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: dev
    - Host: dev.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: dev.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: dev
        - Host: dev.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: dev
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: dev's Blog
        - Username: dev
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: dev
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: dev
    - Is subdomain: true
    - HTML length: 3412
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>dev&#39;s Blog</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/dev(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3549 bytes
 GET /posts 200 in 44ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/dev/posts
    - Hostname: localhost:3000
    - Pathname: /dev/posts
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/dev/posts",
    "normalizedPath": "/dev/posts",
    "pathSegments": [
      "dev",
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/dev/posts
Main localhost domain detected, no rewrite needed
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: dev
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: dev
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: dev
    - Current page: posts
    - Is subdomain: false
[Posts Page] Request details:
    - Username: dev
    - Host: localhost:3000
    - Is subdomain (detected): false
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: dev
        - Host: localhost:3000
        - Is subdomain: false
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: dev
        - Current page: posts
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: dev's Blog
        - Username: dev
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /dev/
  4. /dev/posts
  5. /dev/about
  6. /dev/post/dev-mode
  7. /dev/post/firebase-admin-nextjs
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: dev
        - Is subdomain: false
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: dev
    - Is subdomain: false
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>dev&#39;s Blog</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /dev/
    /dev/posts
    /dev/about
    /dev/post/dev-mode
    /dev/post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/dev/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/post/dev-mode"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/post/firebase-admin-nextjs"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/dev/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /dev/themes/altay/theme.css
  3. /dev/
  4. /dev/posts
  5. /dev/about
  6. /dev/post/dev-mode
  7. /dev/post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /dev/posts 200 in 52ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/dev/posts
    - Hostname: localhost:3000
    - Pathname: /dev/posts
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec",
  "host": "localhost:3000",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "none",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/dev/posts",
    "normalizedPath": "/dev/posts",
    "pathSegments": [
      "dev",
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/dev/posts
Main localhost domain detected, no rewrite needed
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: dev
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: dev
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: dev
    - Current page: posts
    - Is subdomain: false
[Posts Page] Request details:
    - Username: dev
    - Host: localhost:3000
    - Is subdomain (detected): false
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: dev
        - Host: localhost:3000
        - Is subdomain: false
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: dev
        - Current page: posts
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: dev's Blog
        - Username: dev
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /dev/
  4. /dev/posts
  5. /dev/about
  6. /dev/post/dev-mode
  7. /dev/post/firebase-admin-nextjs
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: dev
        - Is subdomain: false
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: dev
    - Is subdomain: false
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>dev&#39;s Blog</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /dev/
    /dev/posts
    /dev/about
    /dev/post/dev-mode
    /dev/post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/dev/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/post/dev-mode"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/post/firebase-admin-nextjs"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/dev/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /dev/themes/altay/theme.css
  3. /dev/
  4. /dev/posts
  5. /dev/about
  6. /dev/post/dev-mode
  7. /dev/post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /dev/posts 200 in 1192ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://localhost:3000/dev/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 212ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/dev/themes/altay/theme.css
    - Hostname: localhost:3000
    - Pathname: /dev/themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec; authToken=eyJhbGciOiJSUzI1NiIsImtpZCI6ImZlNjVjY2I4ZWFkMGJhZWY1ZmQzNjE5NWQ2NTI4YTA1NGZiYjc2ZjMiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiRGVtb3VzZXIiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vbWluaS1hcHAtMDAiLCJhdWQiOiJtaW5pLWFwcC0wMCIsImF1dGhfdGltZSI6MTc0ODI4MjIxMiwidXNlcl9pZCI6IjNLWVZtUDhiSkxSVmNKRHdVWHUydzRhblJkdTEiLCJzdWIiOiIzS1lWbVA4YkpMUlZjSkR3VVh1Mnc0YW5SZHUxIiwiaWF0IjoxNzQ4MzcwOTIxLCJleHAiOjE3NDgzNzQ1MjEsImVtYWlsIjoiZGVtb0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsiZGVtb0BnbWFpbC5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.aPnbe2RFyR1kWMutwuzwcES1W4XKFbDP0raCBwQai8PvFbZ9uNRbkiBoMIqaZIpGyNUEefaIK9uoctILpUvA-vOPWr4PhzN0pJ1H3pvVHXVcTX7d6C6Ff13B8fvLaffd9CR0hbLatLxGGvvZDgEe1EfBSe05zY7gV823CQitQUoVJhxxqXhM6aZ-N4979LZKTsocLjMZSt5SOC9n62QWapfhHBb3XA-wjtUm4i9DrmBkFlQxcSLuY4ZDVKfP9ISUfsliKI90fgRNDnkyUE6tDDQBi4wqORuegWjfRjyO8wXwGkUvV1E0MgzPMmO7dCc5I-BTpj-jjuDfw5OpQOZs1g; username=demouser",
  "host": "localhost:3000",
  "referer": "http://localhost:3000/dev/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/dev/themes/altay/theme.css",
    "normalizedPath": "/dev/themes/altay/theme.css",
    "pathSegments": [
      "dev",
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://localhost:3000/dev/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec; authToken=eyJhbGciOiJSUzI1NiIsImtpZCI6ImZlNjVjY2I4ZWFkMGJhZWY1ZmQzNjE5NWQ2NTI4YTA1NGZiYjc2ZjMiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiRGVtb3VzZXIiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vbWluaS1hcHAtMDAiLCJhdWQiOiJtaW5pLWFwcC0wMCIsImF1dGhfdGltZSI6MTc0ODI4MjIxMiwidXNlcl9pZCI6IjNLWVZtUDhiSkxSVmNKRHdVWHUydzRhblJkdTEiLCJzdWIiOiIzS1lWbVA4YkpMUlZjSkR3VVh1Mnc0YW5SZHUxIiwiaWF0IjoxNzQ4MzcwOTIxLCJleHAiOjE3NDgzNzQ1MjEsImVtYWlsIjoiZGVtb0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsiZGVtb0BnbWFpbC5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.aPnbe2RFyR1kWMutwuzwcES1W4XKFbDP0raCBwQai8PvFbZ9uNRbkiBoMIqaZIpGyNUEefaIK9uoctILpUvA-vOPWr4PhzN0pJ1H3pvVHXVcTX7d6C6Ff13B8fvLaffd9CR0hbLatLxGGvvZDgEe1EfBSe05zY7gV823CQitQUoVJhxxqXhM6aZ-N4979LZKTsocLjMZSt5SOC9n62QWapfhHBb3XA-wjtUm4i9DrmBkFlQxcSLuY4ZDVKfP9ISUfsliKI90fgRNDnkyUE6tDDQBi4wqORuegWjfRjyO8wXwGkUvV1E0MgzPMmO7dCc5I-BTpj-jjuDfw5OpQOZs1g; username=demouser",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 79ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://localhost:3000/dev/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec; authToken=eyJhbGciOiJSUzI1NiIsImtpZCI6ImZlNjVjY2I4ZWFkMGJhZWY1ZmQzNjE5NWQ2NTI4YTA1NGZiYjc2ZjMiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiRGVtb3VzZXIiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vbWluaS1hcHAtMDAiLCJhdWQiOiJtaW5pLWFwcC0wMCIsImF1dGhfdGltZSI6MTc0ODI4MjIxMiwidXNlcl9pZCI6IjNLWVZtUDhiSkxSVmNKRHdVWHUydzRhblJkdTEiLCJzdWIiOiIzS1lWbVA4YkpMUlZjSkR3VVh1Mnc0YW5SZHUxIiwiaWF0IjoxNzQ4MzcwOTIxLCJleHAiOjE3NDgzNzQ1MjEsImVtYWlsIjoiZGVtb0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsiZGVtb0BnbWFpbC5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.aPnbe2RFyR1kWMutwuzwcES1W4XKFbDP0raCBwQai8PvFbZ9uNRbkiBoMIqaZIpGyNUEefaIK9uoctILpUvA-vOPWr4PhzN0pJ1H3pvVHXVcTX7d6C6Ff13B8fvLaffd9CR0hbLatLxGGvvZDgEe1EfBSe05zY7gV823CQitQUoVJhxxqXhM6aZ-N4979LZKTsocLjMZSt5SOC9n62QWapfhHBb3XA-wjtUm4i9DrmBkFlQxcSLuY4ZDVKfP9ISUfsliKI90fgRNDnkyUE6tDDQBi4wqORuegWjfRjyO8wXwGkUvV1E0MgzPMmO7dCc5I-BTpj-jjuDfw5OpQOZs1g; username=demouser",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 72ms
 ‚óã Compiling /_not-found/page ...
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
 ‚úì Compiled /_not-found/page in 1580ms
 GET /dev/themes/altay/theme.css 404 in 1636ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "connection": "keep-alive",
  "host": "demouser.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/",
    "normalizedPath": "/",
    "pathSegments": [],
    "pageType": "home"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demouser
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: demouser.localhost:3000
    - X-Minispace-Username: demouser
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-minispace-original-host": "demouser.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "demouser"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demouser
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demouser
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: demouser
        - Is subdomain: true
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3882
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Demouser</title>
 ...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/welcome
    /post/getting-started
    /posts
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4023 bytes
 GET / 200 in 90ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: demouser.localhost:3000
    - Pathname: /posts
    - Headers: {
  "connection": "keep-alive",
  "host": "demouser.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/posts
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /demouser/posts
      - Full new URL: http://localhost:3000/demouser/posts
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: demouser.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /posts 200 in 89ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/demouser/posts
    - Hostname: localhost:3000
    - Pathname: /demouser/posts
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/demouser/posts",
    "normalizedPath": "/demouser/posts",
    "pathSegments": [
      "demouser",
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/demouser/posts
Main localhost domain detected, no rewrite needed
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: false
[Posts Page] Request details:
    - Username: demouser
    - Host: localhost:3000
    - Is subdomain (detected): false
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: localhost:3000
        - Is subdomain: false
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /demouser/
  4. /demouser/posts
  5. /demouser/about
  6. /demouser/post/dev-mode
  7. /demouser/post/firebase-admin-nextjs
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: false
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: false
    - HTML length: 3477
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /demouser/
    /demouser/posts
    /demouser/about
    /demouser/post/dev-mode
    /demouser/post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/demouser/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/post/dev-mode"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/post/firebase-admin-nextjs"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/demouser/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /demouser/themes/altay/theme.css
  3. /demouser/
  4. /demouser/posts
  5. /demouser/about
  6. /demouser/post/dev-mode
  7. /demouser/post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3629 bytes
 GET /demouser/posts 200 in 102ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/post/welcome
    - Hostname: demouser.localhost:3000
    - Pathname: /post/welcome
    - Headers: {
  "connection": "keep-alive",
  "host": "demouser.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/post/welcome",
    "normalizedPath": "/post/welcome",
    "pathSegments": [
      "post",
      "welcome"
    ],
    "pageType": "post-single"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/post/welcome
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /post/welcome
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/post/welcome
      - To pathname: /demouser/post/welcome
      - Full new URL: http://localhost:3000/demouser/post/welcome
 ‚óã Compiling /[username]/post/[slug] ...
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
 ‚úì Compiled /[username]/post/[slug] in 3.6s
 GET /post/welcome 200 in 4213ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/demouser/post/welcome
    - Hostname: localhost:3000
    - Pathname: /demouser/post/welcome
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/demouser/post/welcome",
    "normalizedPath": "/demouser/post/welcome",
    "pathSegments": [
      "demouser",
      "post",
      "welcome"
    ],
    "pageType": "post-single"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/demouser/post/welcome
Main localhost domain detected, no rewrite needed
 GET /demouser/post/welcome 200 in 53ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "connection": "keep-alive",
  "host": "demouser.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
 GET /about 404 in 78ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/demouser/about
    - Hostname: localhost:3000
    - Pathname: /demouser/about
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/demouser/about",
    "normalizedPath": "/demouser/about",
    "pathSegments": [
      "demouser",
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/demouser/about
Main localhost domain detected, no rewrite needed
 GET /demouser/about 404 in 46ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/
    - Hostname: test.localhost:3000
    - Pathname: /
    - Headers: {
  "connection": "keep-alive",
  "host": "test.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "test.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "test",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/",
    "normalizedPath": "/",
    "pathSegments": [],
    "pageType": "home"
  },
  "hostInfo": {
    "hostname": "test.localhost:3000",
    "domainParts": [
      "test",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: test.localhost:3000/
[Middleware] Is subdomain check: test.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: test
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/
      - To pathname: /test
      - Full new URL: http://localhost:3000/test
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: test
    - Host header: test.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: test.localhost:3000
    - X-Minispace-Username: test
    - All headers: {
  "host": "test.localhost:3000",
  "connection": "keep-alive",
  "x-forwarded-host": "test.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-minispace-original-host": "test.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "test"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: test
    - Host: test.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: test
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: test
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for test
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: test
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Test
        - Username: test
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: test
        - Is subdomain: true
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: test
    - Is subdomain: true
    - HTML length: 3858
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Test</title>
    <...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/welcome
    /post/getting-started
    /posts
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/test(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3995 bytes
 GET / 200 in 57ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: test.localhost:3000
    - Pathname: /posts
    - Headers: {
  "connection": "keep-alive",
  "host": "test.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "test.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "test",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "test.localhost:3000",
    "domainParts": [
      "test",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: test.localhost:3000/posts
[Middleware] Is subdomain check: test.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: test
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /test/posts
      - Full new URL: http://localhost:3000/test/posts
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: test
    - Host: test.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: test
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: test
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: test
    - Host: test.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: test.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: test
        - Host: test.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: test
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: test's Blog
        - Username: test
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: test
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: test
    - Is subdomain: true
    - HTML length: 3416
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>test&#39;s Blog</t...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/test(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3554 bytes
 GET /posts 200 in 88ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/test/posts
    - Hostname: localhost:3000
    - Pathname: /test/posts
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "test",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/test/posts",
    "normalizedPath": "/test/posts",
    "pathSegments": [
      "test",
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/test/posts
Main localhost domain detected, no rewrite needed
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: test
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: test
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: test
    - Current page: posts
    - Is subdomain: false
[Posts Page] Request details:
    - Username: test
    - Host: localhost:3000
    - Is subdomain (detected): false
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: test
        - Host: localhost:3000
        - Is subdomain: false
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: test
        - Current page: posts
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: test's Blog
        - Username: test
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /test/
  4. /test/posts
  5. /test/about
  6. /test/post/dev-mode
  7. /test/post/firebase-admin-nextjs
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: test
        - Is subdomain: false
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: test
    - Is subdomain: false
    - HTML length: 3441
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>test&#39;s Blog</t...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /test/
    /test/posts
    /test/about
    /test/post/dev-mode
    /test/post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/test/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/test/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/test/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/test/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/test/post/dev-mode"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/test/post/firebase-admin-nextjs"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/test/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /test/themes/altay/theme.css
  3. /test/
  4. /test/posts
  5. /test/about
  6. /test/post/dev-mode
  7. /test/post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3585 bytes
 GET /test/posts 200 in 96ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/post/welcome
    - Hostname: test.localhost:3000
    - Pathname: /post/welcome
    - Headers: {
  "connection": "keep-alive",
  "host": "test.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "test.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "test",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/post/welcome",
    "normalizedPath": "/post/welcome",
    "pathSegments": [
      "post",
      "welcome"
    ],
    "pageType": "post-single"
  },
  "hostInfo": {
    "hostname": "test.localhost:3000",
    "domainParts": [
      "test",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: test.localhost:3000/post/welcome
[Middleware] Is subdomain check: test.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: test
      - Original pathname: /post/welcome
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/post/welcome
      - To pathname: /test/post/welcome
      - Full new URL: http://localhost:3000/test/post/welcome
 GET /post/welcome 200 in 80ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/test/post/welcome
    - Hostname: localhost:3000
    - Pathname: /test/post/welcome
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "test",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/test/post/welcome",
    "normalizedPath": "/test/post/welcome",
    "pathSegments": [
      "test",
      "post",
      "welcome"
    ],
    "pageType": "post-single"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/test/post/welcome
Main localhost domain detected, no rewrite needed
 GET /test/post/welcome 200 in 71ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: test.localhost:3000
    - Pathname: /about
    - Headers: {
  "connection": "keep-alive",
  "host": "test.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "test.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "test",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "test.localhost:3000",
    "domainParts": [
      "test",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: test.localhost:3000/about
[Middleware] Is subdomain check: test.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: test
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /test/about
      - Full new URL: http://localhost:3000/test/about
 GET /about 404 in 75ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/test/about
    - Hostname: localhost:3000
    - Pathname: /test/about
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "test",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/test/about",
    "normalizedPath": "/test/about",
    "pathSegments": [
      "test",
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/test/about
Main localhost domain detected, no rewrite needed
 GET /test/about 404 in 67ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/
    - Hostname: dev.localhost:3000
    - Pathname: /
    - Headers: {
  "connection": "keep-alive",
  "host": "dev.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "dev.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/",
    "normalizedPath": "/",
    "pathSegments": [],
    "pageType": "home"
  },
  "hostInfo": {
    "hostname": "dev.localhost:3000",
    "domainParts": [
      "dev",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: dev.localhost:3000/
[Middleware] Is subdomain check: dev.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: dev
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/
      - To pathname: /dev
      - Full new URL: http://localhost:3000/dev
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: dev
    - Host header: dev.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: dev.localhost:3000
    - X-Minispace-Username: dev
    - All headers: {
  "host": "dev.localhost:3000",
  "connection": "keep-alive",
  "x-forwarded-host": "dev.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-minispace-original-host": "dev.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "dev"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: dev
    - Host: dev.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: dev
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: dev
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for dev
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: dev
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Dev
        - Username: dev
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: dev
        - Is subdomain: true
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: dev
    - Is subdomain: true
    - HTML length: 3852
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Dev</title>
    <m...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/welcome
    /post/getting-started
    /posts
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/dev(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3988 bytes
 GET / 200 in 81ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: dev.localhost:3000
    - Pathname: /posts
    - Headers: {
  "connection": "keep-alive",
  "host": "dev.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "dev.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "dev.localhost:3000",
    "domainParts": [
      "dev",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: dev.localhost:3000/posts
[Middleware] Is subdomain check: dev.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: dev
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /dev/posts
      - Full new URL: http://localhost:3000/dev/posts
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: dev
    - Host: dev.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: dev
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: dev
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: dev
    - Host: dev.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: dev.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: dev
        - Host: dev.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: dev
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: dev's Blog
        - Username: dev
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: dev
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: dev
    - Is subdomain: true
    - HTML length: 3412
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>dev&#39;s Blog</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/dev(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3549 bytes
 GET /posts 200 in 47ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/dev/posts
    - Hostname: localhost:3000
    - Pathname: /dev/posts
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/dev/posts",
    "normalizedPath": "/dev/posts",
    "pathSegments": [
      "dev",
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/dev/posts
Main localhost domain detected, no rewrite needed
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: dev
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: dev
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: dev
    - Current page: posts
    - Is subdomain: false
[Posts Page] Request details:
    - Username: dev
    - Host: localhost:3000
    - Is subdomain (detected): false
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: dev
        - Host: localhost:3000
        - Is subdomain: false
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: dev
        - Current page: posts
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: dev's Blog
        - Username: dev
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /dev/
  4. /dev/posts
  5. /dev/about
  6. /dev/post/dev-mode
  7. /dev/post/firebase-admin-nextjs
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: dev
        - Is subdomain: false
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: dev
    - Is subdomain: false
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>dev&#39;s Blog</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /dev/
    /dev/posts
    /dev/about
    /dev/post/dev-mode
    /dev/post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/dev/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/post/dev-mode"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/post/firebase-admin-nextjs"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/dev/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /dev/themes/altay/theme.css
  3. /dev/
  4. /dev/posts
  5. /dev/about
  6. /dev/post/dev-mode
  7. /dev/post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /dev/posts 200 in 38ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/post/welcome
    - Hostname: dev.localhost:3000
    - Pathname: /post/welcome
    - Headers: {
  "connection": "keep-alive",
  "host": "dev.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "dev.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/post/welcome",
    "normalizedPath": "/post/welcome",
    "pathSegments": [
      "post",
      "welcome"
    ],
    "pageType": "post-single"
  },
  "hostInfo": {
    "hostname": "dev.localhost:3000",
    "domainParts": [
      "dev",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: dev.localhost:3000/post/welcome
[Middleware] Is subdomain check: dev.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: dev
      - Original pathname: /post/welcome
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/post/welcome
      - To pathname: /dev/post/welcome
      - Full new URL: http://localhost:3000/dev/post/welcome
 GET /post/welcome 200 in 46ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/dev/post/welcome
    - Hostname: localhost:3000
    - Pathname: /dev/post/welcome
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/dev/post/welcome",
    "normalizedPath": "/dev/post/welcome",
    "pathSegments": [
      "dev",
      "post",
      "welcome"
    ],
    "pageType": "post-single"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/dev/post/welcome
Main localhost domain detected, no rewrite needed
 GET /dev/post/welcome 200 in 53ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: dev.localhost:3000
    - Pathname: /about
    - Headers: {
  "connection": "keep-alive",
  "host": "dev.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "dev.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "dev.localhost:3000",
    "domainParts": [
      "dev",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: dev.localhost:3000/about
[Middleware] Is subdomain check: dev.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: dev
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /dev/about
      - Full new URL: http://localhost:3000/dev/about
 GET /about 404 in 41ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/dev/about
    - Hostname: localhost:3000
    - Pathname: /dev/about
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/dev/about",
    "normalizedPath": "/dev/about",
    "pathSegments": [
      "dev",
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/dev/about
Main localhost domain detected, no rewrite needed
 GET /dev/about 404 in 50ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/dev/posts
    - Hostname: localhost:3000
    - Pathname: /dev/posts
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cache-control": "max-age=0",
  "connection": "keep-alive",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec; authToken=eyJhbGciOiJSUzI1NiIsImtpZCI6ImZlNjVjY2I4ZWFkMGJhZWY1ZmQzNjE5NWQ2NTI4YTA1NGZiYjc2ZjMiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiRGVtb3VzZXIiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vbWluaS1hcHAtMDAiLCJhdWQiOiJtaW5pLWFwcC0wMCIsImF1dGhfdGltZSI6MTc0ODI4MjIxMiwidXNlcl9pZCI6IjNLWVZtUDhiSkxSVmNKRHdVWHUydzRhblJkdTEiLCJzdWIiOiIzS1lWbVA4YkpMUlZjSkR3VVh1Mnc0YW5SZHUxIiwiaWF0IjoxNzQ4MzcwOTIxLCJleHAiOjE3NDgzNzQ1MjEsImVtYWlsIjoiZGVtb0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsiZGVtb0BnbWFpbC5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.aPnbe2RFyR1kWMutwuzwcES1W4XKFbDP0raCBwQai8PvFbZ9uNRbkiBoMIqaZIpGyNUEefaIK9uoctILpUvA-vOPWr4PhzN0pJ1H3pvVHXVcTX7d6C6Ff13B8fvLaffd9CR0hbLatLxGGvvZDgEe1EfBSe05zY7gV823CQitQUoVJhxxqXhM6aZ-N4979LZKTsocLjMZSt5SOC9n62QWapfhHBb3XA-wjtUm4i9DrmBkFlQxcSLuY4ZDVKfP9ISUfsliKI90fgRNDnkyUE6tDDQBi4wqORuegWjfRjyO8wXwGkUvV1E0MgzPMmO7dCc5I-BTpj-jjuDfw5OpQOZs1g; username=demouser",
  "host": "localhost:3000",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/dev/posts",
    "normalizedPath": "/dev/posts",
    "pathSegments": [
      "dev",
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/dev/posts
Main localhost domain detected, no rewrite needed
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: dev
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: dev
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: dev
    - Current page: posts
    - Is subdomain: false
[Posts Page] Request details:
    - Username: dev
    - Host: localhost:3000
    - Is subdomain (detected): false
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: dev
        - Host: localhost:3000
        - Is subdomain: false
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: dev
        - Current page: posts
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: dev's Blog
        - Username: dev
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /dev/
  4. /dev/posts
  5. /dev/about
  6. /dev/post/dev-mode
  7. /dev/post/firebase-admin-nextjs
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: dev
        - Is subdomain: false
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: dev
    - Is subdomain: false
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>dev&#39;s Blog</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /dev/
    /dev/posts
    /dev/about
    /dev/post/dev-mode
    /dev/post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/dev/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/post/dev-mode"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/post/firebase-admin-nextjs"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/dev/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /dev/themes/altay/theme.css
  3. /dev/
  4. /dev/posts
  5. /dev/about
  6. /dev/post/dev-mode
  7. /dev/post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /dev/posts 200 in 114ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://localhost:3000/dev/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec; authToken=eyJhbGciOiJSUzI1NiIsImtpZCI6ImZlNjVjY2I4ZWFkMGJhZWY1ZmQzNjE5NWQ2NTI4YTA1NGZiYjc2ZjMiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiRGVtb3VzZXIiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vbWluaS1hcHAtMDAiLCJhdWQiOiJtaW5pLWFwcC0wMCIsImF1dGhfdGltZSI6MTc0ODI4MjIxMiwidXNlcl9pZCI6IjNLWVZtUDhiSkxSVmNKRHdVWHUydzRhblJkdTEiLCJzdWIiOiIzS1lWbVA4YkpMUlZjSkR3VVh1Mnc0YW5SZHUxIiwiaWF0IjoxNzQ4MzcwOTIxLCJleHAiOjE3NDgzNzQ1MjEsImVtYWlsIjoiZGVtb0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsiZGVtb0BnbWFpbC5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.aPnbe2RFyR1kWMutwuzwcES1W4XKFbDP0raCBwQai8PvFbZ9uNRbkiBoMIqaZIpGyNUEefaIK9uoctILpUvA-vOPWr4PhzN0pJ1H3pvVHXVcTX7d6C6Ff13B8fvLaffd9CR0hbLatLxGGvvZDgEe1EfBSe05zY7gV823CQitQUoVJhxxqXhM6aZ-N4979LZKTsocLjMZSt5SOC9n62QWapfhHBb3XA-wjtUm4i9DrmBkFlQxcSLuY4ZDVKfP9ISUfsliKI90fgRNDnkyUE6tDDQBi4wqORuegWjfRjyO8wXwGkUvV1E0MgzPMmO7dCc5I-BTpj-jjuDfw5OpQOZs1g; username=demouser",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 129ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/dev/themes/altay/theme.css
    - Hostname: localhost:3000
    - Pathname: /dev/themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec; username=demouser; authToken=eyJhbGciOiJSUzI1NiIsImtpZCI6ImZlNjVjY2I4ZWFkMGJhZWY1ZmQzNjE5NWQ2NTI4YTA1NGZiYjc2ZjMiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiRGVtb3VzZXIiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vbWluaS1hcHAtMDAiLCJhdWQiOiJtaW5pLWFwcC0wMCIsImF1dGhfdGltZSI6MTc0ODI4MjIxMiwidXNlcl9pZCI6IjNLWVZtUDhiSkxSVmNKRHdVWHUydzRhblJkdTEiLCJzdWIiOiIzS1lWbVA4YkpMUlZjSkR3VVh1Mnc0YW5SZHUxIiwiaWF0IjoxNzQ4MzcxMDEwLCJleHAiOjE3NDgzNzQ2MTAsImVtYWlsIjoiZGVtb0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsiZGVtb0BnbWFpbC5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.DA27WC4tShtiIDiVKx-ShqQctCZpkHB0XaFbXJUv17vqP1HDzYfhxA4hVkrpiKw-0kHqgJqzuglY0FkXuPYxsb19lT4VZlIsgtUhHZscJjL44m82QlGDPfvaQ5M2nmzkyuuL4ez7DMrLDrnizoJubyLq-3l4abuQ2bb1_PzRu6AR7ikTcFgaZmAqAPFb1qdXY9ytcM_aDFogcZeL0isDMr8OLykNw92z6l5bUT6Io68sX7arC0l-wMq-0gcdZPPIHsAthmHryueg7UjuGkIx2llmTIDjm_CAWw4L0_zEZq-HPvaRVBwjDsuu_j0gCqRQGolmd8a8XvhPoYpfBM0tYg",
  "host": "localhost:3000",
  "referer": "http://localhost:3000/dev/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/dev/themes/altay/theme.css",
    "normalizedPath": "/dev/themes/altay/theme.css",
    "pathSegments": [
      "dev",
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://localhost:3000/dev/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec; username=demouser; authToken=eyJhbGciOiJSUzI1NiIsImtpZCI6ImZlNjVjY2I4ZWFkMGJhZWY1ZmQzNjE5NWQ2NTI4YTA1NGZiYjc2ZjMiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiRGVtb3VzZXIiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vbWluaS1hcHAtMDAiLCJhdWQiOiJtaW5pLWFwcC0wMCIsImF1dGhfdGltZSI6MTc0ODI4MjIxMiwidXNlcl9pZCI6IjNLWVZtUDhiSkxSVmNKRHdVWHUydzRhblJkdTEiLCJzdWIiOiIzS1lWbVA4YkpMUlZjSkR3VVh1Mnc0YW5SZHUxIiwiaWF0IjoxNzQ4MzcxMDEwLCJleHAiOjE3NDgzNzQ2MTAsImVtYWlsIjoiZGVtb0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsiZGVtb0BnbWFpbC5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.DA27WC4tShtiIDiVKx-ShqQctCZpkHB0XaFbXJUv17vqP1HDzYfhxA4hVkrpiKw-0kHqgJqzuglY0FkXuPYxsb19lT4VZlIsgtUhHZscJjL44m82QlGDPfvaQ5M2nmzkyuuL4ez7DMrLDrnizoJubyLq-3l4abuQ2bb1_PzRu6AR7ikTcFgaZmAqAPFb1qdXY9ytcM_aDFogcZeL0isDMr8OLykNw92z6l5bUT6Io68sX7arC0l-wMq-0gcdZPPIHsAthmHryueg7UjuGkIx2llmTIDjm_CAWw4L0_zEZq-HPvaRVBwjDsuu_j0gCqRQGolmd8a8XvhPoYpfBM0tYg",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /dev/themes/altay/theme.css 404 in 586ms
 GET /favicon.ico 200 in 582ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://localhost:3000/dev/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec; username=demouser; authToken=eyJhbGciOiJSUzI1NiIsImtpZCI6ImZlNjVjY2I4ZWFkMGJhZWY1ZmQzNjE5NWQ2NTI4YTA1NGZiYjc2ZjMiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiRGVtb3VzZXIiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vbWluaS1hcHAtMDAiLCJhdWQiOiJtaW5pLWFwcC0wMCIsImF1dGhfdGltZSI6MTc0ODI4MjIxMiwidXNlcl9pZCI6IjNLWVZtUDhiSkxSVmNKRHdVWHUydzRhblJkdTEiLCJzdWIiOiIzS1lWbVA4YkpMUlZjSkR3VVh1Mnc0YW5SZHUxIiwiaWF0IjoxNzQ4MzcxMDEwLCJleHAiOjE3NDgzNzQ2MTAsImVtYWlsIjoiZGVtb0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsiZGVtb0BnbWFpbC5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.DA27WC4tShtiIDiVKx-ShqQctCZpkHB0XaFbXJUv17vqP1HDzYfhxA4hVkrpiKw-0kHqgJqzuglY0FkXuPYxsb19lT4VZlIsgtUhHZscJjL44m82QlGDPfvaQ5M2nmzkyuuL4ez7DMrLDrnizoJubyLq-3l4abuQ2bb1_PzRu6AR7ikTcFgaZmAqAPFb1qdXY9ytcM_aDFogcZeL0isDMr8OLykNw92z6l5bUT6Io68sX7arC0l-wMq-0gcdZPPIHsAthmHryueg7UjuGkIx2llmTIDjm_CAWw4L0_zEZq-HPvaRVBwjDsuu_j0gCqRQGolmd8a8XvhPoYpfBM0tYg",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 59ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://localhost:3000/dev/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec; username=demouser; authToken=eyJhbGciOiJSUzI1NiIsImtpZCI6ImZlNjVjY2I4ZWFkMGJhZWY1ZmQzNjE5NWQ2NTI4YTA1NGZiYjc2ZjMiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiRGVtb3VzZXIiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vbWluaS1hcHAtMDAiLCJhdWQiOiJtaW5pLWFwcC0wMCIsImF1dGhfdGltZSI6MTc0ODI4MjIxMiwidXNlcl9pZCI6IjNLWVZtUDhiSkxSVmNKRHdVWHUydzRhblJkdTEiLCJzdWIiOiIzS1lWbVA4YkpMUlZjSkR3VVh1Mnc0YW5SZHUxIiwiaWF0IjoxNzQ4MzcxMDEwLCJleHAiOjE3NDgzNzQ2MTAsImVtYWlsIjoiZGVtb0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsiZGVtb0BnbWFpbC5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.DA27WC4tShtiIDiVKx-ShqQctCZpkHB0XaFbXJUv17vqP1HDzYfhxA4hVkrpiKw-0kHqgJqzuglY0FkXuPYxsb19lT4VZlIsgtUhHZscJjL44m82QlGDPfvaQ5M2nmzkyuuL4ez7DMrLDrnizoJubyLq-3l4abuQ2bb1_PzRu6AR7ikTcFgaZmAqAPFb1qdXY9ytcM_aDFogcZeL0isDMr8OLykNw92z6l5bUT6Io68sX7arC0l-wMq-0gcdZPPIHsAthmHryueg7UjuGkIx2llmTIDjm_CAWw4L0_zEZq-HPvaRVBwjDsuu_j0gCqRQGolmd8a8XvhPoYpfBM0tYg",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 55ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "connection": "keep-alive",
  "host": "demouser.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/",
    "normalizedPath": "/",
    "pathSegments": [],
    "pageType": "home"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demouser
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: demouser.localhost:3000
    - X-Minispace-Username: demouser
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-minispace-original-host": "demouser.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "demouser"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demouser
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demouser
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: demouser
        - Is subdomain: true
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3882
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Demouser</title>
 ...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/welcome
    /post/getting-started
    /posts
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4023 bytes
 GET / 200 in 108ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: demouser.localhost:3000
    - Pathname: /posts
    - Headers: {
  "connection": "keep-alive",
  "host": "demouser.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/posts
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /demouser/posts
      - Full new URL: http://localhost:3000/demouser/posts
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: demouser.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /posts 200 in 73ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/demouser/posts
    - Hostname: localhost:3000
    - Pathname: /demouser/posts
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/demouser/posts",
    "normalizedPath": "/demouser/posts",
    "pathSegments": [
      "demouser",
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/demouser/posts
Main localhost domain detected, no rewrite needed
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: false
[Posts Page] Request details:
    - Username: demouser
    - Host: localhost:3000
    - Is subdomain (detected): false
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: localhost:3000
        - Is subdomain: false
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /demouser/
  4. /demouser/posts
  5. /demouser/about
  6. /demouser/post/dev-mode
  7. /demouser/post/firebase-admin-nextjs
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: false
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: false
    - HTML length: 3477
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /demouser/
    /demouser/posts
    /demouser/about
    /demouser/post/dev-mode
    /demouser/post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/demouser/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/post/dev-mode"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/post/firebase-admin-nextjs"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/demouser/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /demouser/themes/altay/theme.css
  3. /demouser/
  4. /demouser/posts
  5. /demouser/about
  6. /demouser/post/dev-mode
  7. /demouser/post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3629 bytes
 GET /demouser/posts 200 in 79ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/post/welcome
    - Hostname: demouser.localhost:3000
    - Pathname: /post/welcome
    - Headers: {
  "connection": "keep-alive",
  "host": "demouser.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/post/welcome",
    "normalizedPath": "/post/welcome",
    "pathSegments": [
      "post",
      "welcome"
    ],
    "pageType": "post-single"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/post/welcome
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /post/welcome
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/post/welcome
      - To pathname: /demouser/post/welcome
      - Full new URL: http://localhost:3000/demouser/post/welcome
 GET /post/welcome 200 in 86ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/demouser/post/welcome
    - Hostname: localhost:3000
    - Pathname: /demouser/post/welcome
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/demouser/post/welcome",
    "normalizedPath": "/demouser/post/welcome",
    "pathSegments": [
      "demouser",
      "post",
      "welcome"
    ],
    "pageType": "post-single"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/demouser/post/welcome
Main localhost domain detected, no rewrite needed
 GET /demouser/post/welcome 200 in 125ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "connection": "keep-alive",
  "host": "demouser.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
 GET /about 404 in 76ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/demouser/about
    - Hostname: localhost:3000
    - Pathname: /demouser/about
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/demouser/about",
    "normalizedPath": "/demouser/about",
    "pathSegments": [
      "demouser",
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/demouser/about
Main localhost domain detected, no rewrite needed
 GET /demouser/about 404 in 71ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/
    - Hostname: test.localhost:3000
    - Pathname: /
    - Headers: {
  "connection": "keep-alive",
  "host": "test.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "test.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "test",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/",
    "normalizedPath": "/",
    "pathSegments": [],
    "pageType": "home"
  },
  "hostInfo": {
    "hostname": "test.localhost:3000",
    "domainParts": [
      "test",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: test.localhost:3000/
[Middleware] Is subdomain check: test.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: test
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/
      - To pathname: /test
      - Full new URL: http://localhost:3000/test
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: test
    - Host header: test.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: test.localhost:3000
    - X-Minispace-Username: test
    - All headers: {
  "host": "test.localhost:3000",
  "connection": "keep-alive",
  "x-forwarded-host": "test.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-minispace-original-host": "test.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "test"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: test
    - Host: test.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: test
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: test
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for test
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: test
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Test
        - Username: test
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: test
        - Is subdomain: true
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: test
    - Is subdomain: true
    - HTML length: 3858
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Test</title>
    <...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/welcome
    /post/getting-started
    /posts
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/test(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3995 bytes
 GET / 200 in 89ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: test.localhost:3000
    - Pathname: /posts
    - Headers: {
  "connection": "keep-alive",
  "host": "test.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "test.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "test",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "test.localhost:3000",
    "domainParts": [
      "test",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: test.localhost:3000/posts
[Middleware] Is subdomain check: test.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: test
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /test/posts
      - Full new URL: http://localhost:3000/test/posts
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: test
    - Host: test.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: test
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: test
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: test
    - Host: test.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: test.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: test
        - Host: test.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: test
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: test's Blog
        - Username: test
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: test
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: test
    - Is subdomain: true
    - HTML length: 3416
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>test&#39;s Blog</t...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/test(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3554 bytes
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
 GET /posts 200 in 62ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/test/posts
    - Hostname: localhost:3000
    - Pathname: /test/posts
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "test",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/test/posts",
    "normalizedPath": "/test/posts",
    "pathSegments": [
      "test",
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/test/posts
Main localhost domain detected, no rewrite needed
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: test
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: test
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: test
    - Current page: posts
    - Is subdomain: false
[Posts Page] Request details:
    - Username: test
    - Host: localhost:3000
    - Is subdomain (detected): false
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: test
        - Host: localhost:3000
        - Is subdomain: false
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: test
        - Current page: posts
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: test's Blog
        - Username: test
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /test/
  4. /test/posts
  5. /test/about
  6. /test/post/dev-mode
  7. /test/post/firebase-admin-nextjs
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: test
        - Is subdomain: false
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: test
    - Is subdomain: false
    - HTML length: 3441
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>test&#39;s Blog</t...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /test/
    /test/posts
    /test/about
    /test/post/dev-mode
    /test/post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/test/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/test/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/test/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/test/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/test/post/dev-mode"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/test/post/firebase-admin-nextjs"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/test/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /test/themes/altay/theme.css
  3. /test/
  4. /test/posts
  5. /test/about
  6. /test/post/dev-mode
  7. /test/post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3585 bytes
 GET /test/posts 200 in 43ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/post/welcome
    - Hostname: test.localhost:3000
    - Pathname: /post/welcome
    - Headers: {
  "connection": "keep-alive",
  "host": "test.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "test.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "test",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/post/welcome",
    "normalizedPath": "/post/welcome",
    "pathSegments": [
      "post",
      "welcome"
    ],
    "pageType": "post-single"
  },
  "hostInfo": {
    "hostname": "test.localhost:3000",
    "domainParts": [
      "test",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: test.localhost:3000/post/welcome
[Middleware] Is subdomain check: test.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: test
      - Original pathname: /post/welcome
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/post/welcome
      - To pathname: /test/post/welcome
      - Full new URL: http://localhost:3000/test/post/welcome
 GET /post/welcome 200 in 65ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/test/post/welcome
    - Hostname: localhost:3000
    - Pathname: /test/post/welcome
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "test",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/test/post/welcome",
    "normalizedPath": "/test/post/welcome",
    "pathSegments": [
      "test",
      "post",
      "welcome"
    ],
    "pageType": "post-single"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/test/post/welcome
Main localhost domain detected, no rewrite needed
 GET /test/post/welcome 200 in 59ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: test.localhost:3000
    - Pathname: /about
    - Headers: {
  "connection": "keep-alive",
  "host": "test.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "test.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "test",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "test.localhost:3000",
    "domainParts": [
      "test",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: test.localhost:3000/about
[Middleware] Is subdomain check: test.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: test
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /test/about
      - Full new URL: http://localhost:3000/test/about
 GET /about 404 in 49ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/test/about
    - Hostname: localhost:3000
    - Pathname: /test/about
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "test",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/test/about",
    "normalizedPath": "/test/about",
    "pathSegments": [
      "test",
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/test/about
Main localhost domain detected, no rewrite needed
 GET /test/about 404 in 57ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/
    - Hostname: dev.localhost:3000
    - Pathname: /
    - Headers: {
  "connection": "keep-alive",
  "host": "dev.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "dev.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/",
    "normalizedPath": "/",
    "pathSegments": [],
    "pageType": "home"
  },
  "hostInfo": {
    "hostname": "dev.localhost:3000",
    "domainParts": [
      "dev",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: dev.localhost:3000/
[Middleware] Is subdomain check: dev.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: dev
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/
      - To pathname: /dev
      - Full new URL: http://localhost:3000/dev
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: dev
    - Host header: dev.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: dev.localhost:3000
    - X-Minispace-Username: dev
    - All headers: {
  "host": "dev.localhost:3000",
  "connection": "keep-alive",
  "x-forwarded-host": "dev.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-minispace-original-host": "dev.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "dev"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: dev
    - Host: dev.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: dev
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: dev
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for dev
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: dev
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Dev
        - Username: dev
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: dev
        - Is subdomain: true
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: dev
    - Is subdomain: true
    - HTML length: 3852
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Dev</title>
    <m...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/welcome
    /post/getting-started
    /posts
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/dev(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3988 bytes
 GET / 200 in 347ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: dev.localhost:3000
    - Pathname: /posts
    - Headers: {
  "connection": "keep-alive",
  "host": "dev.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "dev.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "dev.localhost:3000",
    "domainParts": [
      "dev",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: dev.localhost:3000/posts
[Middleware] Is subdomain check: dev.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: dev
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /dev/posts
      - Full new URL: http://localhost:3000/dev/posts
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: dev
    - Host: dev.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: dev
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: dev
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: dev
    - Host: dev.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: dev.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: dev
        - Host: dev.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: dev
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: dev's Blog
        - Username: dev
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: dev
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: dev
    - Is subdomain: true
    - HTML length: 3412
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>dev&#39;s Blog</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/dev(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3549 bytes
 GET /posts 200 in 78ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/dev/posts
    - Hostname: localhost:3000
    - Pathname: /dev/posts
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/dev/posts",
    "normalizedPath": "/dev/posts",
    "pathSegments": [
      "dev",
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/dev/posts
Main localhost domain detected, no rewrite needed
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: dev
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: dev
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: dev
    - Current page: posts
    - Is subdomain: false
[Posts Page] Request details:
    - Username: dev
    - Host: localhost:3000
    - Is subdomain (detected): false
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: dev
        - Host: localhost:3000
        - Is subdomain: false
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: dev
        - Current page: posts
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: dev's Blog
        - Username: dev
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /dev/
  4. /dev/posts
  5. /dev/about
  6. /dev/post/dev-mode
  7. /dev/post/firebase-admin-nextjs
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: dev
        - Is subdomain: false
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: dev
    - Is subdomain: false
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>dev&#39;s Blog</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /dev/
    /dev/posts
    /dev/about
    /dev/post/dev-mode
    /dev/post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/dev/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/post/dev-mode"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/post/firebase-admin-nextjs"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/dev/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /dev/themes/altay/theme.css
  3. /dev/
  4. /dev/posts
  5. /dev/about
  6. /dev/post/dev-mode
  7. /dev/post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /dev/posts 200 in 58ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/post/welcome
    - Hostname: dev.localhost:3000
    - Pathname: /post/welcome
    - Headers: {
  "connection": "keep-alive",
  "host": "dev.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "dev.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/post/welcome",
    "normalizedPath": "/post/welcome",
    "pathSegments": [
      "post",
      "welcome"
    ],
    "pageType": "post-single"
  },
  "hostInfo": {
    "hostname": "dev.localhost:3000",
    "domainParts": [
      "dev",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: dev.localhost:3000/post/welcome
[Middleware] Is subdomain check: dev.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: dev
      - Original pathname: /post/welcome
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/post/welcome
      - To pathname: /dev/post/welcome
      - Full new URL: http://localhost:3000/dev/post/welcome
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
 GET /post/welcome 200 in 46ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/dev/post/welcome
    - Hostname: localhost:3000
    - Pathname: /dev/post/welcome
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/dev/post/welcome",
    "normalizedPath": "/dev/post/welcome",
    "pathSegments": [
      "dev",
      "post",
      "welcome"
    ],
    "pageType": "post-single"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/dev/post/welcome
Main localhost domain detected, no rewrite needed
 GET /dev/post/welcome 200 in 43ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: dev.localhost:3000
    - Pathname: /about
    - Headers: {
  "connection": "keep-alive",
  "host": "dev.localhost:3000",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "dev.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "dev.localhost:3000",
    "domainParts": [
      "dev",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: dev.localhost:3000/about
[Middleware] Is subdomain check: dev.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: dev
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /dev/about
      - Full new URL: http://localhost:3000/dev/about
 GET /about 404 in 36ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/dev/about
    - Hostname: localhost:3000
    - Pathname: /dev/about
    - Headers: {
  "connection": "keep-alive",
  "host": "localhost:3000",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/dev/about",
    "normalizedPath": "/dev/about",
    "pathSegments": [
      "dev",
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/dev/about
Main localhost domain detected, no rewrite needed
 GET /dev/about 404 in 39ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/dev/posts
    - Hostname: localhost:3000
    - Pathname: /dev/posts
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cache-control": "max-age=0",
  "connection": "keep-alive",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec; username=demouser; authToken=eyJhbGciOiJSUzI1NiIsImtpZCI6ImZlNjVjY2I4ZWFkMGJhZWY1ZmQzNjE5NWQ2NTI4YTA1NGZiYjc2ZjMiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiRGVtb3VzZXIiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vbWluaS1hcHAtMDAiLCJhdWQiOiJtaW5pLWFwcC0wMCIsImF1dGhfdGltZSI6MTc0ODI4MjIxMiwidXNlcl9pZCI6IjNLWVZtUDhiSkxSVmNKRHdVWHUydzRhblJkdTEiLCJzdWIiOiIzS1lWbVA4YkpMUlZjSkR3VVh1Mnc0YW5SZHUxIiwiaWF0IjoxNzQ4MzcxMDEwLCJleHAiOjE3NDgzNzQ2MTAsImVtYWlsIjoiZGVtb0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsiZGVtb0BnbWFpbC5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.DA27WC4tShtiIDiVKx-ShqQctCZpkHB0XaFbXJUv17vqP1HDzYfhxA4hVkrpiKw-0kHqgJqzuglY0FkXuPYxsb19lT4VZlIsgtUhHZscJjL44m82QlGDPfvaQ5M2nmzkyuuL4ez7DMrLDrnizoJubyLq-3l4abuQ2bb1_PzRu6AR7ikTcFgaZmAqAPFb1qdXY9ytcM_aDFogcZeL0isDMr8OLykNw92z6l5bUT6Io68sX7arC0l-wMq-0gcdZPPIHsAthmHryueg7UjuGkIx2llmTIDjm_CAWw4L0_zEZq-HPvaRVBwjDsuu_j0gCqRQGolmd8a8XvhPoYpfBM0tYg",
  "host": "localhost:3000",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/dev/posts",
    "normalizedPath": "/dev/posts",
    "pathSegments": [
      "dev",
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/dev/posts
Main localhost domain detected, no rewrite needed
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: dev
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: dev
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: dev
    - Current page: posts
    - Is subdomain: false
[Posts Page] Request details:
    - Username: dev
    - Host: localhost:3000
    - Is subdomain (detected): false
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: dev
        - Host: localhost:3000
        - Is subdomain: false
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: dev
        - Current page: posts
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: dev's Blog
        - Username: dev
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /dev/
  4. /dev/posts
  5. /dev/about
  6. /dev/post/dev-mode
  7. /dev/post/firebase-admin-nextjs
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: dev
        - Is subdomain: false
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: dev
    - Is subdomain: false
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>dev&#39;s Blog</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /dev/
    /dev/posts
    /dev/about
    /dev/post/dev-mode
    /dev/post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/dev/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/post/dev-mode"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/dev/post/firebase-admin-nextjs"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/dev/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /dev/themes/altay/theme.css
  3. /dev/
  4. /dev/posts
  5. /dev/about
  6. /dev/post/dev-mode
  7. /dev/post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /dev/posts 200 in 420ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://localhost:3000/dev/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec; username=demouser; authToken=eyJhbGciOiJSUzI1NiIsImtpZCI6ImZlNjVjY2I4ZWFkMGJhZWY1ZmQzNjE5NWQ2NTI4YTA1NGZiYjc2ZjMiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiRGVtb3VzZXIiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vbWluaS1hcHAtMDAiLCJhdWQiOiJtaW5pLWFwcC0wMCIsImF1dGhfdGltZSI6MTc0ODI4MjIxMiwidXNlcl9pZCI6IjNLWVZtUDhiSkxSVmNKRHdVWHUydzRhblJkdTEiLCJzdWIiOiIzS1lWbVA4YkpMUlZjSkR3VVh1Mnc0YW5SZHUxIiwiaWF0IjoxNzQ4MzcxMDEwLCJleHAiOjE3NDgzNzQ2MTAsImVtYWlsIjoiZGVtb0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsiZGVtb0BnbWFpbC5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.DA27WC4tShtiIDiVKx-ShqQctCZpkHB0XaFbXJUv17vqP1HDzYfhxA4hVkrpiKw-0kHqgJqzuglY0FkXuPYxsb19lT4VZlIsgtUhHZscJjL44m82QlGDPfvaQ5M2nmzkyuuL4ez7DMrLDrnizoJubyLq-3l4abuQ2bb1_PzRu6AR7ikTcFgaZmAqAPFb1qdXY9ytcM_aDFogcZeL0isDMr8OLykNw92z6l5bUT6Io68sX7arC0l-wMq-0gcdZPPIHsAthmHryueg7UjuGkIx2llmTIDjm_CAWw4L0_zEZq-HPvaRVBwjDsuu_j0gCqRQGolmd8a8XvhPoYpfBM0tYg",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 158ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/dev/themes/altay/theme.css
    - Hostname: localhost:3000
    - Pathname: /dev/themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec; username=demouser; authToken=eyJhbGciOiJSUzI1NiIsImtpZCI6ImZlNjVjY2I4ZWFkMGJhZWY1ZmQzNjE5NWQ2NTI4YTA1NGZiYjc2ZjMiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiRGVtb3VzZXIiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vbWluaS1hcHAtMDAiLCJhdWQiOiJtaW5pLWFwcC0wMCIsImF1dGhfdGltZSI6MTc0ODI4MjIxMiwidXNlcl9pZCI6IjNLWVZtUDhiSkxSVmNKRHdVWHUydzRhblJkdTEiLCJzdWIiOiIzS1lWbVA4YkpMUlZjSkR3VVh1Mnc0YW5SZHUxIiwiaWF0IjoxNzQ4MzcxMDYwLCJleHAiOjE3NDgzNzQ2NjAsImVtYWlsIjoiZGVtb0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsiZGVtb0BnbWFpbC5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.AGfJnjnFq5dE0oTxdZ5vnR631g428B83yTRJf18OLLIGQNFyE7IQ63dpzg6_VP9Gqhh2IWP2Y54nIG8bat67iasJtL0DkHwDFwK4SVKyaCRpQZsZM7JOWFirOM-5HCHNqlyDS6oMYfzflAzRUZUOQe7AB-vx2lpHn4M7TNx0tNXwaulcU-yOf_cOfYFOktLIDGRP-MiLWA0-62NZSiYvoP15c3XJRj4xRyYIyfyUAMGgiNsUcVkdVlQlKPsGJ5qCPRePc0pPoazkh9nbbjmU8G_mrIFk7zmqImyQlLl1diko8omNBIYPYunmPP0rDNsikNQV8ZQtM5n2Uv-ldAitXQ",
  "host": "localhost:3000",
  "referer": "http://localhost:3000/dev/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "dev",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/dev/themes/altay/theme.css",
    "normalizedPath": "/dev/themes/altay/theme.css",
    "pathSegments": [
      "dev",
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://localhost:3000/dev/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec; username=demouser; authToken=eyJhbGciOiJSUzI1NiIsImtpZCI6ImZlNjVjY2I4ZWFkMGJhZWY1ZmQzNjE5NWQ2NTI4YTA1NGZiYjc2ZjMiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiRGVtb3VzZXIiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vbWluaS1hcHAtMDAiLCJhdWQiOiJtaW5pLWFwcC0wMCIsImF1dGhfdGltZSI6MTc0ODI4MjIxMiwidXNlcl9pZCI6IjNLWVZtUDhiSkxSVmNKRHdVWHUydzRhblJkdTEiLCJzdWIiOiIzS1lWbVA4YkpMUlZjSkR3VVh1Mnc0YW5SZHUxIiwiaWF0IjoxNzQ4MzcxMDYwLCJleHAiOjE3NDgzNzQ2NjAsImVtYWlsIjoiZGVtb0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsiZGVtb0BnbWFpbC5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.AGfJnjnFq5dE0oTxdZ5vnR631g428B83yTRJf18OLLIGQNFyE7IQ63dpzg6_VP9Gqhh2IWP2Y54nIG8bat67iasJtL0DkHwDFwK4SVKyaCRpQZsZM7JOWFirOM-5HCHNqlyDS6oMYfzflAzRUZUOQe7AB-vx2lpHn4M7TNx0tNXwaulcU-yOf_cOfYFOktLIDGRP-MiLWA0-62NZSiYvoP15c3XJRj4xRyYIyfyUAMGgiNsUcVkdVlQlKPsGJ5qCPRePc0pPoazkh9nbbjmU8G_mrIFk7zmqImyQlLl1diko8omNBIYPYunmPP0rDNsikNQV8ZQtM5n2Uv-ldAitXQ",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /dev/themes/altay/theme.css 404 in 757ms
 GET /favicon.ico 200 in 917ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://localhost:3000/dev/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec; username=demouser; authToken=eyJhbGciOiJSUzI1NiIsImtpZCI6ImZlNjVjY2I4ZWFkMGJhZWY1ZmQzNjE5NWQ2NTI4YTA1NGZiYjc2ZjMiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiRGVtb3VzZXIiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vbWluaS1hcHAtMDAiLCJhdWQiOiJtaW5pLWFwcC0wMCIsImF1dGhfdGltZSI6MTc0ODI4MjIxMiwidXNlcl9pZCI6IjNLWVZtUDhiSkxSVmNKRHdVWHUydzRhblJkdTEiLCJzdWIiOiIzS1lWbVA4YkpMUlZjSkR3VVh1Mnc0YW5SZHUxIiwiaWF0IjoxNzQ4MzcxMDYwLCJleHAiOjE3NDgzNzQ2NjAsImVtYWlsIjoiZGVtb0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsiZGVtb0BnbWFpbC5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.AGfJnjnFq5dE0oTxdZ5vnR631g428B83yTRJf18OLLIGQNFyE7IQ63dpzg6_VP9Gqhh2IWP2Y54nIG8bat67iasJtL0DkHwDFwK4SVKyaCRpQZsZM7JOWFirOM-5HCHNqlyDS6oMYfzflAzRUZUOQe7AB-vx2lpHn4M7TNx0tNXwaulcU-yOf_cOfYFOktLIDGRP-MiLWA0-62NZSiYvoP15c3XJRj4xRyYIyfyUAMGgiNsUcVkdVlQlKPsGJ5qCPRePc0pPoazkh9nbbjmU8G_mrIFk7zmqImyQlLl1diko8omNBIYPYunmPP0rDNsikNQV8ZQtM5n2Uv-ldAitXQ",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 298ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://localhost:3000/dev/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec; username=demouser; authToken=eyJhbGciOiJSUzI1NiIsImtpZCI6ImZlNjVjY2I4ZWFkMGJhZWY1ZmQzNjE5NWQ2NTI4YTA1NGZiYjc2ZjMiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiRGVtb3VzZXIiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vbWluaS1hcHAtMDAiLCJhdWQiOiJtaW5pLWFwcC0wMCIsImF1dGhfdGltZSI6MTc0ODI4MjIxMiwidXNlcl9pZCI6IjNLWVZtUDhiSkxSVmNKRHdVWHUydzRhblJkdTEiLCJzdWIiOiIzS1lWbVA4YkpMUlZjSkR3VVh1Mnc0YW5SZHUxIiwiaWF0IjoxNzQ4MzcxMDYwLCJleHAiOjE3NDgzNzQ2NjAsImVtYWlsIjoiZGVtb0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsiZGVtb0BnbWFpbC5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.AGfJnjnFq5dE0oTxdZ5vnR631g428B83yTRJf18OLLIGQNFyE7IQ63dpzg6_VP9Gqhh2IWP2Y54nIG8bat67iasJtL0DkHwDFwK4SVKyaCRpQZsZM7JOWFirOM-5HCHNqlyDS6oMYfzflAzRUZUOQe7AB-vx2lpHn4M7TNx0tNXwaulcU-yOf_cOfYFOktLIDGRP-MiLWA0-62NZSiYvoP15c3XJRj4xRyYIyfyUAMGgiNsUcVkdVlQlKPsGJ5qCPRePc0pPoazkh9nbbjmU8G_mrIFk7zmqImyQlLl1diko8omNBIYPYunmPP0rDNsikNQV8ZQtM5n2Uv-ldAitXQ",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 42ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/demouser/posts
    - Hostname: localhost:3000
    - Pathname: /demouser/posts
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec; username=demouser; authToken=eyJhbGciOiJSUzI1NiIsImtpZCI6ImZlNjVjY2I4ZWFkMGJhZWY1ZmQzNjE5NWQ2NTI4YTA1NGZiYjc2ZjMiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiRGVtb3VzZXIiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vbWluaS1hcHAtMDAiLCJhdWQiOiJtaW5pLWFwcC0wMCIsImF1dGhfdGltZSI6MTc0ODI4MjIxMiwidXNlcl9pZCI6IjNLWVZtUDhiSkxSVmNKRHdVWHUydzRhblJkdTEiLCJzdWIiOiIzS1lWbVA4YkpMUlZjSkR3VVh1Mnc0YW5SZHUxIiwiaWF0IjoxNzQ4MzcxMDYwLCJleHAiOjE3NDgzNzQ2NjAsImVtYWlsIjoiZGVtb0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsiZGVtb0BnbWFpbC5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.AGfJnjnFq5dE0oTxdZ5vnR631g428B83yTRJf18OLLIGQNFyE7IQ63dpzg6_VP9Gqhh2IWP2Y54nIG8bat67iasJtL0DkHwDFwK4SVKyaCRpQZsZM7JOWFirOM-5HCHNqlyDS6oMYfzflAzRUZUOQe7AB-vx2lpHn4M7TNx0tNXwaulcU-yOf_cOfYFOktLIDGRP-MiLWA0-62NZSiYvoP15c3XJRj4xRyYIyfyUAMGgiNsUcVkdVlQlKPsGJ5qCPRePc0pPoazkh9nbbjmU8G_mrIFk7zmqImyQlLl1diko8omNBIYPYunmPP0rDNsikNQV8ZQtM5n2Uv-ldAitXQ",
  "host": "localhost:3000",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "none",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/demouser/posts",
    "normalizedPath": "/demouser/posts",
    "pathSegments": [
      "demouser",
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/demouser/posts
Main localhost domain detected, no rewrite needed
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: false
[Posts Page] Request details:
    - Username: demouser
    - Host: localhost:3000
    - Is subdomain (detected): false
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: localhost:3000
        - Is subdomain: false
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /demouser/
  4. /demouser/posts
  5. /demouser/about
  6. /demouser/post/dev-mode
  7. /demouser/post/firebase-admin-nextjs
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: false
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: false
    - HTML length: 3477
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /demouser/
    /demouser/posts
    /demouser/about
    /demouser/post/dev-mode
    /demouser/post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/demouser/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/post/dev-mode"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demouser/post/firebase-admin-nextjs"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/demouser/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /demouser/themes/altay/theme.css
  3. /demouser/
  4. /demouser/posts
  5. /demouser/about
  6. /demouser/post/dev-mode
  7. /demouser/post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3629 bytes
 GET /demouser/posts 200 in 96ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://localhost:3000/demouser/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec; username=demouser; authToken=eyJhbGciOiJSUzI1NiIsImtpZCI6ImZlNjVjY2I4ZWFkMGJhZWY1ZmQzNjE5NWQ2NTI4YTA1NGZiYjc2ZjMiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiRGVtb3VzZXIiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vbWluaS1hcHAtMDAiLCJhdWQiOiJtaW5pLWFwcC0wMCIsImF1dGhfdGltZSI6MTc0ODI4MjIxMiwidXNlcl9pZCI6IjNLWVZtUDhiSkxSVmNKRHdVWHUydzRhblJkdTEiLCJzdWIiOiIzS1lWbVA4YkpMUlZjSkR3VVh1Mnc0YW5SZHUxIiwiaWF0IjoxNzQ4MzcxMDYwLCJleHAiOjE3NDgzNzQ2NjAsImVtYWlsIjoiZGVtb0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsiZGVtb0BnbWFpbC5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.AGfJnjnFq5dE0oTxdZ5vnR631g428B83yTRJf18OLLIGQNFyE7IQ63dpzg6_VP9Gqhh2IWP2Y54nIG8bat67iasJtL0DkHwDFwK4SVKyaCRpQZsZM7JOWFirOM-5HCHNqlyDS6oMYfzflAzRUZUOQe7AB-vx2lpHn4M7TNx0tNXwaulcU-yOf_cOfYFOktLIDGRP-MiLWA0-62NZSiYvoP15c3XJRj4xRyYIyfyUAMGgiNsUcVkdVlQlKPsGJ5qCPRePc0pPoazkh9nbbjmU8G_mrIFk7zmqImyQlLl1diko8omNBIYPYunmPP0rDNsikNQV8ZQtM5n2Uv-ldAitXQ",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 57ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/demouser/themes/altay/theme.css
    - Hostname: localhost:3000
    - Pathname: /demouser/themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec; username=demouser; authToken=eyJhbGciOiJSUzI1NiIsImtpZCI6ImZlNjVjY2I4ZWFkMGJhZWY1ZmQzNjE5NWQ2NTI4YTA1NGZiYjc2ZjMiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiRGVtb3VzZXIiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vbWluaS1hcHAtMDAiLCJhdWQiOiJtaW5pLWFwcC0wMCIsImF1dGhfdGltZSI6MTc0ODI4MjIxMiwidXNlcl9pZCI6IjNLWVZtUDhiSkxSVmNKRHdVWHUydzRhblJkdTEiLCJzdWIiOiIzS1lWbVA4YkpMUlZjSkR3VVh1Mnc0YW5SZHUxIiwiaWF0IjoxNzQ4MzcxMDczLCJleHAiOjE3NDgzNzQ2NzMsImVtYWlsIjoiZGVtb0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsiZGVtb0BnbWFpbC5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.eOBnl9BwQ8m_h5Drw_TRYN5_KaXocgctkg8eGSdAOc0y_RicI-JfvVnO1zpT2kvMAVvFT36OTfHpgq9mWIceoqZ4DC-Mj5Utkr0Q5I2hhGtbLH9IRpyQEWnMHgDk1f1jp76DhXRzEuFX-NhKwcBUtCNu_qh9V7qoeWA1u0HDdz99PCfTTyxQri9pUWyJEcrnD_ytIlpLJM6v2lcffqssVC2BTHCCtHzG5MAHYle7I1EeUF0GWc7snSBHaYZ-nSYnXeLZNGkWSTamaSMv7GmwmgEKOgDlHoJDaDyanb6DIla2g3J11NKanElUpuZlGcpnnfMS9fza-nHM2p-JCyBHEA",
  "host": "localhost:3000",
  "referer": "http://localhost:3000/demouser/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/demouser/themes/altay/theme.css",
    "normalizedPath": "/demouser/themes/altay/theme.css",
    "pathSegments": [
      "demouser",
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
 GET /demouser/themes/altay/theme.css 404 in 58ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://localhost:3000/demouser/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec; username=demouser; authToken=eyJhbGciOiJSUzI1NiIsImtpZCI6ImZlNjVjY2I4ZWFkMGJhZWY1ZmQzNjE5NWQ2NTI4YTA1NGZiYjc2ZjMiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiRGVtb3VzZXIiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vbWluaS1hcHAtMDAiLCJhdWQiOiJtaW5pLWFwcC0wMCIsImF1dGhfdGltZSI6MTc0ODI4MjIxMiwidXNlcl9pZCI6IjNLWVZtUDhiSkxSVmNKRHdVWHUydzRhblJkdTEiLCJzdWIiOiIzS1lWbVA4YkpMUlZjSkR3VVh1Mnc0YW5SZHUxIiwiaWF0IjoxNzQ4MzcxMDczLCJleHAiOjE3NDgzNzQ2NzMsImVtYWlsIjoiZGVtb0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsiZGVtb0BnbWFpbC5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.eOBnl9BwQ8m_h5Drw_TRYN5_KaXocgctkg8eGSdAOc0y_RicI-JfvVnO1zpT2kvMAVvFT36OTfHpgq9mWIceoqZ4DC-Mj5Utkr0Q5I2hhGtbLH9IRpyQEWnMHgDk1f1jp76DhXRzEuFX-NhKwcBUtCNu_qh9V7qoeWA1u0HDdz99PCfTTyxQri9pUWyJEcrnD_ytIlpLJM6v2lcffqssVC2BTHCCtHzG5MAHYle7I1EeUF0GWc7snSBHaYZ-nSYnXeLZNGkWSTamaSMv7GmwmgEKOgDlHoJDaDyanb6DIla2g3J11NKanElUpuZlGcpnnfMS9fza-nHM2p-JCyBHEA",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 84ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://localhost:3000/demouser/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "sidebar:state=true; __next_hmr_refresh_hash__=3b58d3fdfb05da79d5f76bbf8b2d5779633457081244afec; username=demouser; authToken=eyJhbGciOiJSUzI1NiIsImtpZCI6ImZlNjVjY2I4ZWFkMGJhZWY1ZmQzNjE5NWQ2NTI4YTA1NGZiYjc2ZjMiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiRGVtb3VzZXIiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vbWluaS1hcHAtMDAiLCJhdWQiOiJtaW5pLWFwcC0wMCIsImF1dGhfdGltZSI6MTc0ODI4MjIxMiwidXNlcl9pZCI6IjNLWVZtUDhiSkxSVmNKRHdVWHUydzRhblJkdTEiLCJzdWIiOiIzS1lWbVA4YkpMUlZjSkR3VVh1Mnc0YW5SZHUxIiwiaWF0IjoxNzQ4MzcxMDczLCJleHAiOjE3NDgzNzQ2NzMsImVtYWlsIjoiZGVtb0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsiZGVtb0BnbWFpbC5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.eOBnl9BwQ8m_h5Drw_TRYN5_KaXocgctkg8eGSdAOc0y_RicI-JfvVnO1zpT2kvMAVvFT36OTfHpgq9mWIceoqZ4DC-Mj5Utkr0Q5I2hhGtbLH9IRpyQEWnMHgDk1f1jp76DhXRzEuFX-NhKwcBUtCNu_qh9V7qoeWA1u0HDdz99PCfTTyxQri9pUWyJEcrnD_ytIlpLJM6v2lcffqssVC2BTHCCtHzG5MAHYle7I1EeUF0GWc7snSBHaYZ-nSYnXeLZNGkWSTamaSMv7GmwmgEKOgDlHoJDaDyanb6DIla2g3J11NKanElUpuZlGcpnnfMS9fza-nHM2p-JCyBHEA",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 42ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: demouser.localhost:3000
    - Pathname: /posts
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cache-control": "max-age=0",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=203",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/posts
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /demouser/posts
      - Full new URL: http://localhost:3000/demouser/posts
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: demouser.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /posts 200 in 84ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=203",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 137ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 69ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 62ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 61ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=203",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
 GET /about 404 in 74ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 97ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 62ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 49ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: demouser.localhost:3000
    - Pathname: /posts
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=203",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/posts
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /demouser/posts
      - Full new URL: http://localhost:3000/demouser/posts
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: demouser.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /posts 200 in 129ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=203",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 139ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 121ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 78ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 71ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=203",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/",
    "normalizedPath": "/",
    "pathSegments": [],
    "pageType": "home"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demouser
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: demouser.localhost:3000
    - X-Minispace-Username: demouser
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "navigate",
  "sec-fetch-user": "?1",
  "sec-fetch-dest": "document",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1",
  "x-minispace-original-host": "demouser.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "demouser"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demouser
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demouser
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: demouser
        - Is subdomain: true
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3882
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Demouser</title>
 ...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/welcome
    /post/getting-started
    /posts
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4023 bytes
 GET / 200 in 78ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=203",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 83ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 107ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 89ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 99ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: demouser.localhost:3000
    - Pathname: /posts
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=203",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/posts
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /demouser/posts
      - Full new URL: http://localhost:3000/demouser/posts
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: demouser.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /posts 200 in 237ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=203",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 162ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 148ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 87ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 85ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: demouser.localhost:3000
    - Pathname: /posts
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=203",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/posts
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /demouser/posts
      - Full new URL: http://localhost:3000/demouser/posts
 ‚úì Compiled middleware in 86ms
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: demouser.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /posts 200 in 993ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=203",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 153ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 639ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 102ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
 GET /favicon.ico 200 in 82ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 61ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 52ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
 ‚úì Compiled middleware in 24ms
 ‚úì Compiled middleware in 3ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: demouser.localhost:3000
    - Pathname: /posts
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=203",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/posts
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /demouser/posts
      - Full new URL: http://localhost:3000/demouser/posts
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: demouser.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /posts 200 in 273ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=203",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 149ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 108ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 63ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 55ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 165ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: demouser.localhost:3000
    - Pathname: /posts
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=203",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/posts
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /demouser/posts
      - Full new URL: http://localhost:3000/demouser/posts
 ‚úì Compiled middleware in 29ms
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: demouser.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /posts 200 in 303ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=203",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 201ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 127ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 117ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=203",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 79ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
 ‚úì Compiled in 3.4s
 ‚úì Compiled in 1678ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: demouser.localhost:3000
    - Pathname: /posts
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=162",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/posts
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /demouser/posts
      - Full new URL: http://localhost:3000/demouser/posts
 ‚úì Compiled /[username]/posts in 188ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: demouser.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: demouser.localhost:3000
    - Pathname: /posts
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=163",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/posts
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /demouser/posts
      - Full new URL: http://localhost:3000/demouser/posts
 GET /posts 200 in 1056ms
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: demouser.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /posts 200 in 197ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=163",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
 ‚úì Compiled /[username] in 92ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=163",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 1069ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=163",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 340ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=163",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 282ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=163",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 194ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=163",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/",
    "normalizedPath": "/",
    "pathSegments": [],
    "pageType": "home"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demouser
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: demouser.localhost:3000
    - X-Minispace-Username: demouser
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "navigate",
  "sec-fetch-user": "?1",
  "sec-fetch-dest": "document",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=163",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1",
  "x-minispace-original-host": "demouser.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "demouser"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demouser
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demouser
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: demouser
        - Is subdomain: true
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3882
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Demouser</title>
 ...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/welcome
    /post/getting-started
    /posts
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4023 bytes
 GET / 200 in 357ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=163",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=163",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 198ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=163",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 147ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=163",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 68ms
üö®üö®üö® USER PROFILE PAGE EXECUTING - THIS SHOULD ALWAYS SHOW üö®üö®üö®
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=163",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 56ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
 ‚úì Compiled in 750ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=182",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/",
    "normalizedPath": "/",
    "pathSegments": [],
    "pageType": "home"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
 ‚úì Compiled /[username] in 55ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demouser
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: demouser.localhost:3000
    - X-Minispace-Username: demouser
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "*/*",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1",
  "x-minispace-original-host": "demouser.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "demouser",
  "x-nextjs-rewritten-path": "/demouser"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demouser
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demouser
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: demouser
        - Is subdomain: true
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3882
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Demouser</title>
 ...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/welcome
    /post/getting-started
    /posts
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4023 bytes
 GET / 200 in 493ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=182",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 726ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 124ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 75ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 66ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 60ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 88ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/post/welcome
    - Hostname: demouser.localhost:3000
    - Pathname: /post/welcome
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=182",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/post/welcome",
    "normalizedPath": "/post/welcome",
    "pathSegments": [
      "post",
      "welcome"
    ],
    "pageType": "post-single"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/post/welcome
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /post/welcome
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/post/welcome
      - To pathname: /demouser/post/welcome
      - Full new URL: http://localhost:3000/demouser/post/welcome
 GET /post/welcome 200 in 120ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/post/welcome",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 1479ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/post/welcome",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 147ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/post/welcome",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 79ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=182",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/",
    "normalizedPath": "/",
    "pathSegments": [],
    "pageType": "home"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demouser
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: demouser.localhost:3000
    - X-Minispace-Username: demouser
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "navigate",
  "sec-fetch-dest": "document",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1",
  "x-minispace-original-host": "demouser.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "demouser"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demouser
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demouser
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: demouser
        - Is subdomain: true
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3882
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Demouser</title>
 ...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/welcome
    /post/getting-started
    /posts
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4023 bytes
 GET / 200 in 1169ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=182",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 174ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 77ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 84ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 54ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: demouser.localhost:3000
    - Pathname: /posts
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=182",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/posts
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /demouser/posts
      - Full new URL: http://localhost:3000/demouser/posts
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: demouser.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
 GET /posts 200 in 572ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=182",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
 GET /favicon.ico 200 in 95ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 83ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 49ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 52ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=182",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/",
    "normalizedPath": "/",
    "pathSegments": [],
    "pageType": "home"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demouser
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: demouser.localhost:3000
    - X-Minispace-Username: demouser
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "navigate",
  "sec-fetch-dest": "document",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1",
  "x-minispace-original-host": "demouser.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "demouser"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demouser
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demouser
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: demouser
        - Is subdomain: true
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3882
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Demouser</title>
 ...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/welcome
    /post/getting-started
    /posts
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4023 bytes
 GET / 200 in 177ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=182",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 132ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 100ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 137ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 64ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: demouser.localhost:3000
    - Pathname: /posts
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=182",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/posts
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /demouser/posts
      - Full new URL: http://localhost:3000/demouser/posts
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: demouser.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /posts 200 in 87ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=182",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 101ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 95ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 89ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 84ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
 ‚úì Compiled in 548ms
 ‚úì Compiled in 2.3s
 ‚úì Compiled in 266ms
 ‚úì Compiled in 288ms
 ‚úì Compiled in 413ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=182",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
 ‚óã Compiling /[username]/[...slug] ...
 ‚úì Compiled /[username]/[...slug] in 5.2s
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /about
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: about
        - Path without username: about
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [about]
          - Selected page: about
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: about
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demouser
    - Path: /about
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'about' from slug: [about]
Firebase Admin not available for user demouser - using demo content. Path: /about, Subdomain: true
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: about
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: about
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: About demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 5):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: about
        - Username: demouser
        - Is subdomain: true
        - Current page: about
        - Template context keys: site, page, navigationContext, customPages, debug, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3080
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>About demouser</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 5):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3222 bytes
 GET /about 200 in 6653ms
 ‚úì Compiled /[username] in 52ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=182",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 576ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 89ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 169ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 48ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: demouser.localhost:3000
    - Pathname: /posts
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=182",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/posts
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /demouser/posts
      - Full new URL: http://localhost:3000/demouser/posts
 ‚óã Compiling /[username]/posts ...
 ‚úì Compiled /[username]/posts in 1729ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: demouser.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /posts 200 in 2572ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=182",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 410ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 150ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 251ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 205ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=182",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/",
    "normalizedPath": "/",
    "pathSegments": [],
    "pageType": "home"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demouser
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: demouser.localhost:3000
    - X-Minispace-Username: demouser
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "navigate",
  "sec-fetch-user": "?1",
  "sec-fetch-dest": "document",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1",
  "x-minispace-original-host": "demouser.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "demouser"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demouser
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demouser
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: demouser
        - Is subdomain: true
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3882
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Demouser</title>
 ...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/welcome
    /post/getting-started
    /posts
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4023 bytes
 GET / 200 in 208ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=182",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 288ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 122ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 386ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 152ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: demouser.localhost:3000
    - Pathname: /posts
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=182",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/posts
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /demouser/posts
      - Full new URL: http://localhost:3000/demouser/posts
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: demouser.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /posts 200 in 161ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=182",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 210ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 286ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 114ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 130ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=182",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /about
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: about
        - Path without username: about
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [about]
          - Selected page: about
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: about
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demouser
    - Path: /about
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'about' from slug: [about]
Firebase Admin not available for user demouser - using demo content. Path: /about, Subdomain: true
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: about
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: about
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: About demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 5):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: about
        - Username: demouser
        - Is subdomain: true
        - Current page: about
        - Template context keys: site, page, navigationContext, customPages, debug, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3080
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>About demouser</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 5):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3222 bytes
 GET /about 200 in 393ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=182",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 415ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 213ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 544ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=182",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 157ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/demo
    - Hostname: localhost:3000
    - Pathname: /demo
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip,deflate",
  "connection": "keep-alive",
  "host": "localhost:3000",
  "user-agent": "node-fetch/1.0 (+https://github.com/bitinn/node-fetch)",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demo",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/demo",
    "normalizedPath": "/demo",
    "pathSegments": [
      "demo"
    ],
    "pageType": "home"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/demo
Main localhost domain detected, no rewrite needed
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demo
    - Host header: localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "accept": "*/*",
  "user-agent": "node-fetch/1.0 (+https://github.com/bitinn/node-fetch)",
  "accept-encoding": "gzip,deflate",
  "host": "localhost:3000",
  "connection": "keep-alive",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demo
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demo
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demo
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demo
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demo
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Demo
        - Username: demo
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /demo/
  4. /demo/posts
  5. /demo/about
  6. /demo/post/welcome
  7. /demo/post/getting-started
  8. /demo/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: demo
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demo
    - Is subdomain: false
    - HTML length: 3888
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Demo</title>
    <...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /demo/
    /demo/posts
    /demo/about
    /demo/post/welcome
    /demo/post/getting-started
    /demo/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/demo/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demo/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demo/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demo/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demo/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demo/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demo/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/demo/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /demo/themes/altay/theme.css
  3. /demo/
  4. /demo/posts
  5. /demo/about
  6. /demo/post/welcome
  7. /demo/post/getting-started
  8. /demo/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4031 bytes
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/demo/about
    - Hostname: localhost:3000
    - Pathname: /demo/about
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip,deflate",
  "connection": "keep-alive",
  "host": "localhost:3000",
  "user-agent": "node-fetch/1.0 (+https://github.com/bitinn/node-fetch)",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demo",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/demo/about",
    "normalizedPath": "/demo/about",
    "pathSegments": [
      "demo",
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/demo/about
Main localhost domain detected, no rewrite needed
 GET /demo 200 in 605ms
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demo
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /about
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: about
        - Path without username: about
        - Username check: demo
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [about]
          - Selected page: about
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demo
    - Current page: about
    - Is subdomain: false
[Dynamic Page] Request details:
    - Username: demo
    - Path: /about
    - Host: localhost:3000
    - Is subdomain (detected): false
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'about' from slug: [about]
Firebase Admin not available for user demo - using demo content. Path: /about, Subdomain: false
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: about
[THEME-DEBUG] Navigation context:
        - Username: demo
        - Current page: about
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: About demo
        - Username: demo
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 5):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /demo/
  4. /demo/posts
  5. /demo/about
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: about
        - Username: demo
        - Is subdomain: false
        - Current page: about
        - Template context keys: site, page, navigationContext, customPages, debug, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demo
    - Is subdomain: false
    - HTML length: 3079
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>About demo</title>...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /demo/
    /demo/posts
    /demo/about
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/demo/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demo/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demo/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/demo/about"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/demo/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 5):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /demo/themes/altay/theme.css
  3. /demo/
  4. /demo/posts
  5. /demo/about
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3223 bytes
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/demo/projects
    - Hostname: localhost:3000
    - Pathname: /demo/projects
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip,deflate",
  "connection": "keep-alive",
  "host": "localhost:3000",
  "user-agent": "node-fetch/1.0 (+https://github.com/bitinn/node-fetch)",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demo",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/demo/projects",
    "normalizedPath": "/demo/projects",
    "pathSegments": [
      "demo",
      "projects"
    ],
    "pageType": "projects"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/demo/projects
Main localhost domain detected, no rewrite needed
 GET /demo/about 200 in 195ms
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demo
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /projects
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: projects
        - Path without username: projects
        - Username check: demo
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [projects]
          - Selected page: projects
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demo
    - Current page: projects
    - Is subdomain: false
[Dynamic Page] Request details:
    - Username: demo
    - Path: /projects
    - Host: localhost:3000
    - Is subdomain (detected): false
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'projects' from slug: [projects]
Firebase Admin not available for user demo - using demo content. Path: /projects, Subdomain: false
Error rendering page projects with theme altay: Error: Page template projects not found in theme altay
    at renderThemePage (src/lib/theme-service.ts:202:4)
    at async UserDynamicPage (src/app/[username]/[...slug]/page.tsx:164:19)
  200 |     }
  201 |     
> 202 |     // Check if the page template exists
      |    ^
  203 |     const pageTemplatePath = theme.templates[page];
  204 |     if (!pageTemplatePath) {
  205 |       throw new Error(`Page template ${page} not found in theme ${themeId}`);
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/demo/contact
    - Hostname: localhost:3000
    - Pathname: /demo/contact
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip,deflate",
  "connection": "keep-alive",
  "host": "localhost:3000",
  "user-agent": "node-fetch/1.0 (+https://github.com/bitinn/node-fetch)",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demo",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/demo/contact",
    "normalizedPath": "/demo/contact",
    "pathSegments": [
      "demo",
      "contact"
    ],
    "pageType": "contact"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/demo/contact
Main localhost domain detected, no rewrite needed
 GET /demo/projects 200 in 72ms
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demo
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /contact
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: contact
        - Path without username: contact
        - Username check: demo
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [contact]
          - Selected page: contact
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demo
    - Current page: contact
    - Is subdomain: false
[Dynamic Page] Request details:
    - Username: demo
    - Path: /contact
    - Host: localhost:3000
    - Is subdomain (detected): false
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'contact' from slug: [contact]
Firebase Admin not available for user demo - using demo content. Path: /contact, Subdomain: false
Error rendering page contact with theme altay: Error: Page template contact not found in theme altay
    at renderThemePage (src/lib/theme-service.ts:202:4)
    at async UserDynamicPage (src/app/[username]/[...slug]/page.tsx:164:19)
  200 |     }
  201 |     
> 202 |     // Check if the page template exists
      |    ^
  203 |     const pageTemplatePath = theme.templates[page];
  204 |     if (!pageTemplatePath) {
  205 |       throw new Error(`Page template ${page} not found in theme ${themeId}`);
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/demo/nonexistent
    - Hostname: localhost:3000
    - Pathname: /demo/nonexistent
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip,deflate",
  "connection": "keep-alive",
  "host": "localhost:3000",
  "user-agent": "node-fetch/1.0 (+https://github.com/bitinn/node-fetch)",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demo",
  "isSubdomain": false,
  "pathInfo": {
    "originalPath": "/demo/nonexistent",
    "normalizedPath": "/demo/nonexistent",
    "pathSegments": [
      "demo",
      "nonexistent"
    ],
    "pageType": "nonexistent"
  },
  "hostInfo": {
    "hostname": "localhost:3000",
    "domainParts": [
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: localhost:3000/demo/nonexistent
Main localhost domain detected, no rewrite needed
 GET /demo/contact 200 in 74ms
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demo
    - Host: localhost:3000
    - Is subdomain detected: false
    - Original pathname: /nonexistent
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: nonexistent
        - Path without username: nonexistent
        - Username check: demo
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [nonexistent]
          - Selected page: nonexistent
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demo
    - Current page: nonexistent
    - Is subdomain: false
[Dynamic Page] Request details:
    - Username: demo
    - Path: /nonexistent
    - Host: localhost:3000
    - Is subdomain (detected): false
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'nonexistent' from slug: [nonexistent]
Firebase Admin not available for user demo - using demo content. Path: /nonexistent, Subdomain: false
[Dynamic Page] Page not found: /nonexistent for user demo
 GET /demo/nonexistent 200 in 68ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/
    - Hostname: demo.localhost:3000
    - Pathname: /
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip,deflate",
  "connection": "keep-alive",
  "host": "demo.localhost:3000",
  "user-agent": "node-fetch/1.0 (+https://github.com/bitinn/node-fetch)",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "demo.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demo",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/",
    "normalizedPath": "/",
    "pathSegments": [],
    "pageType": "home"
  },
  "hostInfo": {
    "hostname": "demo.localhost:3000",
    "domainParts": [
      "demo",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demo.localhost:3000/
[Middleware] Is subdomain check: demo.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demo
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/
      - To pathname: /demo
      - Full new URL: http://localhost:3000/demo
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demo
    - Host header: demo.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: demo.localhost:3000
    - X-Minispace-Username: demo
    - All headers: {
  "accept": "*/*",
  "user-agent": "node-fetch/1.0 (+https://github.com/bitinn/node-fetch)",
  "accept-encoding": "gzip,deflate",
  "host": "demo.localhost:3000",
  "connection": "keep-alive",
  "x-forwarded-host": "demo.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-minispace-original-host": "demo.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "demo"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demo
    - Host: demo.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demo
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demo
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demo
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demo
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Demo
        - Username: demo
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: demo
        - Is subdomain: true
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demo
    - Is subdomain: true
    - HTML length: 3858
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Demo</title>
    <...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/welcome
    /post/getting-started
    /posts
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demo(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3995 bytes
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demo.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip,deflate",
  "connection": "keep-alive",
  "host": "demo.localhost:3000",
  "user-agent": "node-fetch/1.0 (+https://github.com/bitinn/node-fetch)",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "demo.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demo",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demo.localhost:3000",
    "domainParts": [
      "demo",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demo.localhost:3000/about
[Middleware] Is subdomain check: demo.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demo
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demo/about
      - Full new URL: http://localhost:3000/demo/about
 GET / 200 in 236ms
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demo
    - Host: demo.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /about
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: about
        - Path without username: about
        - Username check: demo
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [about]
          - Selected page: about
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demo
    - Current page: about
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demo
    - Path: /about
    - Host: demo.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demo.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'about' from slug: [about]
Firebase Admin not available for user demo - using demo content. Path: /about, Subdomain: true
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: about
[THEME-DEBUG] Navigation context:
        - Username: demo
        - Current page: about
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: About demo
        - Username: demo
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 5):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: about
        - Username: demo
        - Is subdomain: true
        - Current page: about
        - Template context keys: site, page, navigationContext, customPages, debug, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demo
    - Is subdomain: true
    - HTML length: 3064
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>About demo</title>...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demo(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 5):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3202 bytes
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/projects
    - Hostname: demo.localhost:3000
    - Pathname: /projects
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip,deflate",
  "connection": "keep-alive",
  "host": "demo.localhost:3000",
  "user-agent": "node-fetch/1.0 (+https://github.com/bitinn/node-fetch)",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "demo.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demo",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/projects",
    "normalizedPath": "/projects",
    "pathSegments": [
      "projects"
    ],
    "pageType": "projects"
  },
  "hostInfo": {
    "hostname": "demo.localhost:3000",
    "domainParts": [
      "demo",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demo.localhost:3000/projects
[Middleware] Is subdomain check: demo.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demo
      - Original pathname: /projects
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/projects
      - To pathname: /demo/projects
      - Full new URL: http://localhost:3000/demo/projects
 GET /about 200 in 196ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demo
    - Host: demo.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /projects
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: projects
        - Path without username: projects
        - Username check: demo
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [projects]
          - Selected page: projects
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demo
    - Current page: projects
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demo
    - Path: /projects
    - Host: demo.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demo.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'projects' from slug: [projects]
Firebase Admin not available for user demo - using demo content. Path: /projects, Subdomain: true
Error rendering page projects with theme altay: Error: Page template projects not found in theme altay
    at renderThemePage (src/lib/theme-service.ts:202:4)
    at async UserDynamicPage (src/app/[username]/[...slug]/page.tsx:164:19)
  200 |     }
  201 |     
> 202 |     // Check if the page template exists
      |    ^
  203 |     const pageTemplatePath = theme.templates[page];
  204 |     if (!pageTemplatePath) {
  205 |       throw new Error(`Page template ${page} not found in theme ${themeId}`);
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/contact
    - Hostname: demo.localhost:3000
    - Pathname: /contact
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip,deflate",
  "connection": "keep-alive",
  "host": "demo.localhost:3000",
  "user-agent": "node-fetch/1.0 (+https://github.com/bitinn/node-fetch)",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "demo.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demo",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/contact",
    "normalizedPath": "/contact",
    "pathSegments": [
      "contact"
    ],
    "pageType": "contact"
  },
  "hostInfo": {
    "hostname": "demo.localhost:3000",
    "domainParts": [
      "demo",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demo.localhost:3000/contact
[Middleware] Is subdomain check: demo.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demo
      - Original pathname: /contact
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/contact
      - To pathname: /demo/contact
      - Full new URL: http://localhost:3000/demo/contact
 GET /projects 200 in 467ms
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demo
    - Host: demo.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /contact
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: contact
        - Path without username: contact
        - Username check: demo
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [contact]
          - Selected page: contact
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demo
    - Current page: contact
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demo
    - Path: /contact
    - Host: demo.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demo.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'contact' from slug: [contact]
Firebase Admin not available for user demo - using demo content. Path: /contact, Subdomain: true
Error rendering page contact with theme altay: Error: Page template contact not found in theme altay
    at renderThemePage (src/lib/theme-service.ts:202:4)
    at async UserDynamicPage (src/app/[username]/[...slug]/page.tsx:164:19)
  200 |     }
  201 |     
> 202 |     // Check if the page template exists
      |    ^
  203 |     const pageTemplatePath = theme.templates[page];
  204 |     if (!pageTemplatePath) {
  205 |       throw new Error(`Page template ${page} not found in theme ${themeId}`);
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/nonexistent
    - Hostname: demo.localhost:3000
    - Pathname: /nonexistent
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip,deflate",
  "connection": "keep-alive",
  "host": "demo.localhost:3000",
  "user-agent": "node-fetch/1.0 (+https://github.com/bitinn/node-fetch)",
  "x-forwarded-for": "::ffff:127.0.0.1",
  "x-forwarded-host": "demo.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demo",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/nonexistent",
    "normalizedPath": "/nonexistent",
    "pathSegments": [
      "nonexistent"
    ],
    "pageType": "nonexistent"
  },
  "hostInfo": {
    "hostname": "demo.localhost:3000",
    "domainParts": [
      "demo",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demo.localhost:3000/nonexistent
[Middleware] Is subdomain check: demo.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demo
      - Original pathname: /nonexistent
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/nonexistent
      - To pathname: /demo/nonexistent
      - Full new URL: http://localhost:3000/demo/nonexistent
 GET /contact 200 in 58ms
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demo
    - Host: demo.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /nonexistent
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: nonexistent
        - Path without username: nonexistent
        - Username check: demo
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [nonexistent]
          - Selected page: nonexistent
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demo
    - Current page: nonexistent
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demo
    - Path: /nonexistent
    - Host: demo.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demo.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'nonexistent' from slug: [nonexistent]
Firebase Admin not available for user demo - using demo content. Path: /nonexistent, Subdomain: true
[Dynamic Page] Page not found: /nonexistent for user demo
 GET /nonexistent 200 in 71ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
 ‚úì Compiled in 1498ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=290",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
 ‚óã Compiling /[username]/[...slug] ...
 ‚úì Compiled /[username]/[...slug] in 542ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /about
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: about
        - Path without username: about
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [about]
          - Selected page: about
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: about
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demouser
    - Path: /about
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'about' from slug: [about]
Firebase Admin not available for user demouser - using demo content. Path: /about, Subdomain: true
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: about
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: about
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: About demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: about
        - Username: demouser
        - Is subdomain: true
        - Current page: about
        - Template context keys: site, page, navigationContext, customPages, debug, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3176
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>About demouser</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /projects
    /contact
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3318 bytes
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=292",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
 GET /about 200 in 1337ms
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /about
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: about
        - Path without username: about
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [about]
          - Selected page: about
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: about
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demouser
    - Path: /about
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'about' from slug: [about]
Firebase Admin not available for user demouser - using demo content. Path: /about, Subdomain: true
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: about
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: about
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: About demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: about
        - Username: demouser
        - Is subdomain: true
        - Current page: about
        - Template context keys: site, page, navigationContext, customPages, debug, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3176
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>About demouser</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /projects
    /contact
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3318 bytes
 GET /about 200 in 192ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=292",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /about
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: about
        - Path without username: about
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [about]
          - Selected page: about
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: about
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demouser
    - Path: /about
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'about' from slug: [about]
Firebase Admin not available for user demouser - using demo content. Path: /about, Subdomain: true
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: about
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: about
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: About demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: about
        - Username: demouser
        - Is subdomain: true
        - Current page: about
        - Template context keys: site, page, navigationContext, customPages, debug, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3176
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>About demouser</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /projects
    /contact
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3318 bytes
 GET /about 200 in 103ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=292",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
 ‚úì Compiled /[username] in 46ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 595ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 106ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 91ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 80ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 87ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 79ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/projects
    - Hostname: demouser.localhost:3000
    - Pathname: /projects
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=292",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/projects",
    "normalizedPath": "/projects",
    "pathSegments": [
      "projects"
    ],
    "pageType": "projects"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/projects
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /projects
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/projects
      - To pathname: /demouser/projects
      - Full new URL: http://localhost:3000/demouser/projects
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /projects
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: projects
        - Path without username: projects
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [projects]
          - Selected page: projects
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: projects
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demouser
    - Path: /projects
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'projects' from slug: [projects]
Firebase Admin not available for user demouser - using demo content. Path: /projects, Subdomain: true
Error rendering page projects with theme altay: Error: Page template projects not found in theme altay
    at renderThemePage (src/lib/theme-service.ts:205:12)
    at async UserDynamicPage (src/app/[username]/[...slug]/page.tsx:164:19)
  203 |     const pageTemplatePath = theme.templates[page];
  204 |     if (!pageTemplatePath) {
> 205 |       throw new Error(`Page template ${page} not found in theme ${themeId}`);
      |            ^
  206 |     }
  207 |     
  208 |     // Load the templates
 GET /projects 200 in 900ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/projects",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 1042ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/projects",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 92ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/projects",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 82ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=292",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /about
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: about
        - Path without username: about
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [about]
          - Selected page: about
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: about
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demouser
    - Path: /about
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'about' from slug: [about]
Firebase Admin not available for user demouser - using demo content. Path: /about, Subdomain: true
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: about
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: about
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: About demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: about
        - Username: demouser
        - Is subdomain: true
        - Current page: about
        - Template context keys: site, page, navigationContext, customPages, debug, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3176
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>About demouser</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /projects
    /contact
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3318 bytes
 GET /about 200 in 137ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=292",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 180ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 134ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 119ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 87ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/contact
    - Hostname: demouser.localhost:3000
    - Pathname: /contact
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=292",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/contact",
    "normalizedPath": "/contact",
    "pathSegments": [
      "contact"
    ],
    "pageType": "contact"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/contact
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /contact
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/contact
      - To pathname: /demouser/contact
      - Full new URL: http://localhost:3000/demouser/contact
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /contact
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: contact
        - Path without username: contact
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [contact]
          - Selected page: contact
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: contact
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demouser
    - Path: /contact
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'contact' from slug: [contact]
Firebase Admin not available for user demouser - using demo content. Path: /contact, Subdomain: true
Error rendering page contact with theme altay: Error: Page template contact not found in theme altay
    at renderThemePage (src/lib/theme-service.ts:205:12)
    at async UserDynamicPage (src/app/[username]/[...slug]/page.tsx:164:19)
  203 |     const pageTemplatePath = theme.templates[page];
  204 |     if (!pageTemplatePath) {
> 205 |       throw new Error(`Page template ${page} not found in theme ${themeId}`);
      |            ^
  206 |     }
  207 |     
  208 |     // Load the templates
 GET /contact 200 in 77ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/contact",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 165ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/contact",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 131ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/contact",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 78ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=292",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /about
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: about
        - Path without username: about
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [about]
          - Selected page: about
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: about
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demouser
    - Path: /about
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'about' from slug: [about]
Firebase Admin not available for user demouser - using demo content. Path: /about, Subdomain: true
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: about
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: about
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: About demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: about
        - Username: demouser
        - Is subdomain: true
        - Current page: about
        - Template context keys: site, page, navigationContext, customPages, debug, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3176
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>About demouser</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /projects
    /contact
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3318 bytes
 GET /about 200 in 96ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 86ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=292",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 81ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 89ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 71ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/projects
    - Hostname: demouser.localhost:3000
    - Pathname: /projects
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=292",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/projects",
    "normalizedPath": "/projects",
    "pathSegments": [
      "projects"
    ],
    "pageType": "projects"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/projects
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /projects
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/projects
      - To pathname: /demouser/projects
      - Full new URL: http://localhost:3000/demouser/projects
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /projects
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: projects
        - Path without username: projects
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [projects]
          - Selected page: projects
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: projects
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demouser
    - Path: /projects
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'projects' from slug: [projects]
Firebase Admin not available for user demouser - using demo content. Path: /projects, Subdomain: true
Error rendering page projects with theme altay: Error: Page template projects not found in theme altay
    at renderThemePage (src/lib/theme-service.ts:205:12)
    at async UserDynamicPage (src/app/[username]/[...slug]/page.tsx:164:19)
  203 |     const pageTemplatePath = theme.templates[page];
  204 |     if (!pageTemplatePath) {
> 205 |       throw new Error(`Page template ${page} not found in theme ${themeId}`);
      |            ^
  206 |     }
  207 |     
  208 |     // Load the templates
 GET /projects 200 in 96ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/projects",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 175ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/projects",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 90ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/projects",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 76ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/projects",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
 GET /favicon.ico 200 in 122ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=292",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /about
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: about
        - Path without username: about
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [about]
          - Selected page: about
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: about
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demouser
    - Path: /about
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'about' from slug: [about]
Firebase Admin not available for user demouser - using demo content. Path: /about, Subdomain: true
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: about
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: about
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: About demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: about
        - Username: demouser
        - Is subdomain: true
        - Current page: about
        - Template context keys: site, page, navigationContext, customPages, debug, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3176
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>About demouser</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /projects
    /contact
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3318 bytes
 GET /about 200 in 76ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
 GET /favicon.ico 200 in 89ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=292",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 69ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 73ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 56ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: demouser.localhost:3000
    - Pathname: /posts
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=292",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/posts
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /demouser/posts
      - Full new URL: http://localhost:3000/demouser/posts
 ‚úì Compiled /[username]/posts in 36ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: demouser.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
 GET /posts 200 in 598ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=292",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 85ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 84ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 73ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 57ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=292",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/",
    "normalizedPath": "/",
    "pathSegments": [],
    "pageType": "home"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demouser
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: demouser.localhost:3000
    - X-Minispace-Username: demouser
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "navigate",
  "sec-fetch-user": "?1",
  "sec-fetch-dest": "document",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1",
  "x-minispace-original-host": "demouser.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "demouser"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demouser
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demouser
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: demouser
        - Is subdomain: true
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3882
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Demouser</title>
 ...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/welcome
    /post/getting-started
    /posts
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4023 bytes
 GET / 200 in 87ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=292",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 93ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 92ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 85ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 77ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: demouser.localhost:3000
    - Pathname: /posts
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=292",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/posts
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /demouser/posts
      - Full new URL: http://localhost:3000/demouser/posts
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /posts
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: posts
        - Path without username: posts
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [posts]
          - Selected page: posts
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: posts
    - Is subdomain: true
[Posts Page] Request details:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - Path: /posts
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/posts" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserPostsPage (src/app/[username]/posts/page.tsx:32:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Posts Page] Admin availability check result: true
[Posts Page] Firebase Admin DB not available but in development mode.
        - Username: demouser
        - Host: demouser.localhost:3000
        - Is subdomain: true
        - NODE_ENV: development
      
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: posts
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: posts
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: demouser's Blog
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: posts
        - Username: demouser
        - Is subdomain: true
        - Current page: posts
        - Template context keys: site, posts, navigationContext, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3432
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>demouser&#39;s Blo...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /post/dev-mode
    /post/firebase-admin-nextjs
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/dev-mode
  7. /post/firebase-admin-nextjs
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3574 bytes
 GET /posts 200 in 576ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=292",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 259ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 182ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 93ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/posts",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 70ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=292",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /about
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: about
        - Path without username: about
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [about]
          - Selected page: about
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: about
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demouser
    - Path: /about
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'about' from slug: [about]
Firebase Admin not available for user demouser - using demo content. Path: /about, Subdomain: true
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: about
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: about
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: About demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: about
        - Username: demouser
        - Is subdomain: true
        - Current page: about
        - Template context keys: site, page, navigationContext, customPages, debug, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3176
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>About demouser</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /projects
    /contact
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3318 bytes
 GET /about 200 in 222ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=292",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 476ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 158ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 104ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Starting initialization...
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=292",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 76ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=377",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
 ‚úì Compiled in 1066ms
 ‚óã Compiling /[username]/[...slug] ...
 ‚úì Compiled /[username]/[...slug] in 1176ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /about
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: about
        - Path without username: about
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [about]
          - Selected page: about
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: about
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demouser
    - Path: /about
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'about' from slug: [about]
Firebase Admin not available for user demouser - using demo content. Path: /about, Subdomain: true
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: about
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: about
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: About demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: about
        - Username: demouser
        - Is subdomain: true
        - Current page: about
        - Template context keys: site, page, navigationContext, customPages, debug, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3176
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>About demouser</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /projects
    /contact
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3318 bytes
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=379",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
 GET /about 200 in 1600ms
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /about
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: about
        - Path without username: about
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [about]
          - Selected page: about
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: about
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demouser
    - Path: /about
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'about' from slug: [about]
Firebase Admin not available for user demouser - using demo content. Path: /about, Subdomain: true
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: about
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: about
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: About demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: about
        - Username: demouser
        - Is subdomain: true
        - Current page: about
        - Template context keys: site, page, navigationContext, customPages, debug, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3176
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>About demouser</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /projects
    /contact
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3318 bytes
 GET /about 200 in 168ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=379",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /about
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: about
        - Path without username: about
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [about]
          - Selected page: about
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: about
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demouser
    - Path: /about
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'about' from slug: [about]
Firebase Admin not available for user demouser - using demo content. Path: /about, Subdomain: true
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: about
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: about
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: About demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: about
        - Username: demouser
        - Is subdomain: true
        - Current page: about
        - Template context keys: site, page, navigationContext, customPages, debug, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3176
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>About demouser</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /projects
    /contact
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3318 bytes
 GET /about 200 in 77ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=379",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
 ‚úì Compiled /[username] in 31ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=379",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 513ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=379",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 77ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=379",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 69ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=379",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 50ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=379",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 65ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=379",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 86ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=392",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
 ‚úì Compiled in 1309ms
 ‚úì Compiled /[username]/[...slug] in 94ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /about
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: about
        - Path without username: about
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [about]
          - Selected page: about
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: about
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demouser
    - Path: /about
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'about' from slug: [about]
Firebase Admin not available for user demouser - using demo content. Path: /about, Subdomain: true
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: about
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: about
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: About demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: about
        - Username: demouser
        - Is subdomain: true
        - Current page: about
        - Template context keys: site, page, navigationContext, customPages, debug, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3176
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>About demouser</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /projects
    /contact
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3318 bytes
 GET /about 200 in 776ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=394",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /about
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: about
        - Path without username: about
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [about]
          - Selected page: about
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: about
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demouser
    - Path: /about
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'about' from slug: [about]
Firebase Admin not available for user demouser - using demo content. Path: /about, Subdomain: true
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: about
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: about
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: About demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: about
        - Username: demouser
        - Is subdomain: true
        - Current page: about
        - Template context keys: site, page, navigationContext, customPages, debug, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3176
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>About demouser</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /projects
    /contact
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3318 bytes
 GET /about 200 in 65ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=394",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /about
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: about
        - Path without username: about
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [about]
          - Selected page: about
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: about
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demouser
    - Path: /about
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'about' from slug: [about]
Firebase Admin not available for user demouser - using demo content. Path: /about, Subdomain: true
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: about
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: about
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: About demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: about
        - Username: demouser
        - Is subdomain: true
        - Current page: about
        - Template context keys: site, page, navigationContext, customPages, debug, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3176
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>About demouser</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /projects
    /contact
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3318 bytes
 GET /about 200 in 77ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=394",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
 ‚úì Compiled /[username] in 70ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=394",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 1250ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=394",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 94ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=394",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 97ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=394",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 65ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=394",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 87ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=407",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
 ‚úì Compiled in 237ms
 ‚úì Compiled /[username]/[...slug] in 64ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /about
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: about
        - Path without username: about
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [about]
          - Selected page: about
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: about
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demouser
    - Path: /about
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'about' from slug: [about]
Firebase Admin not available for user demouser - using demo content. Path: /about, Subdomain: true
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: about
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: about
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: About demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: about
        - Username: demouser
        - Is subdomain: true
        - Current page: about
        - Template context keys: site, page, navigationContext, customPages, debug, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3176
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>About demouser</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /projects
    /contact
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3318 bytes
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=409",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
 GET /about 200 in 379ms
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /about
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: about
        - Path without username: about
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [about]
          - Selected page: about
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: about
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demouser
    - Path: /about
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'about' from slug: [about]
Firebase Admin not available for user demouser - using demo content. Path: /about, Subdomain: true
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: about
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: about
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: About demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: about
        - Username: demouser
        - Is subdomain: true
        - Current page: about
        - Template context keys: site, page, navigationContext, customPages, debug, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3176
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>About demouser</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /projects
    /contact
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3318 bytes
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=409",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
 GET /about 200 in 176ms
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /about
[SUBDOMAIN-DEBUG] Path processing:
        - Clean path: about
        - Path without username: about
        - Username check: demouser
        - Starts with username?: false
[SUBDOMAIN-DEBUG] Page detection:
          - Path segments: [about]
          - Selected page: about
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: about
    - Is subdomain: true
[Dynamic Page] Request details:
    - Username: demouser
    - Path: /about
    - Host: demouser.localhost:3000
    - Is subdomain (detected): true
    - NODE_ENV: development
  
[Firebase Admin] isAdminAvailable() called:
    - adminInitialized: development
    - adminAuth available: false
    - adminDb available: false
    - real admin available: false
    - NODE_ENV: development
    - Project ID: mini-app-00
  
Error: Route "/[username]/[...slug]" used `headers().get('host')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at isAdminAvailable (src/lib/firebase/admin.ts:139:25)
    at UserDynamicPage (src/app/[username]/[...slug]/page.tsx:36:40)
  137 |       const { headers } = require('next/headers');
  138 |       const headersList = headers();
> 139 |       host = headersList.get('host') || '';
      |                         ^
  140 |     } else {
  141 |       host = window.location.host;
  142 |     }
[Firebase Admin] Detected subdomain request on host: demouser.localhost:3000
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Firebase Admin] Admin not available but in development mode - allowing demo content
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[Dynamic Page] Admin availability check result: true, Dev mode: true
[Dynamic Page] Resolved current page: 'about' from slug: [about]
Firebase Admin not available for user demouser - using demo content. Path: /about, Subdomain: true
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: about
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: about
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: About demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: about
        - Username: demouser
        - Is subdomain: true
        - Current page: about
        - Template context keys: site, page, navigationContext, customPages, debug, content, navigation, userCSS, currentYear
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: demouser
    - Is subdomain: true
    - HTML length: 3176
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>About demouser</ti...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /
    /posts
    /about
    /projects
    /contact
[SUBDOMAIN-DEBUG] Subdomain mode - transforming username-prefixed links to relative links
    - Username pattern: /href="\/demouser(\/[^"]*|\/?)?"/g
[SUBDOMAIN-DEBUG] Links after subdomain transformation:
      []
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 7):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /projects
  7. /contact
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 3318 bytes
 GET /about 200 in 51ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=409",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/themes/altay/theme.css",
    "normalizedPath": "/themes/altay/theme.css",
    "pathSegments": [
      "themes",
      "altay",
      "theme.css"
    ],
    "pageType": "themes"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
 ‚úì Compiled /[username] in 139ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=409",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 838ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=409",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 195ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=409",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 133ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=409",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Theme rendering details:
        - Theme ID: altay
        - Page type: home
        - Username: favicon.ico
        - Is subdomain: false
        - Current page: home
        - Template context keys: site, posts, pages, navigationContext, currentYear, content, navigation, userCSS
[SUBDOMAIN-DEBUG] Updating navigation links:
    - Username: favicon.ico
    - Is subdomain: false
    - HTML length: 3972
    - First 100 chars: <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favicon.ico</title...
[SUBDOMAIN-DEBUG] Links found in HTML before transformation:
    https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
    /themes/altay/theme.css
    /favicon.ico/
    /favicon.ico/posts
    /favicon.ico/about
    /favicon.ico/post/welcome
    /favicon.ico/post/getting-started
    /favicon.ico/posts
[SUBDOMAIN-DEBUG] Path-based mode - transforming relative links to username-prefixed links
[SUBDOMAIN-DEBUG] Transforming section link "href="/themes/altay/theme.css"" to "href="/favicon.ico/themes/altay/theme.css""
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/about"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/welcome"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/post/getting-started"
[SUBDOMAIN-DEBUG] Skipping already username-prefixed or external link: href="/favicon.ico/posts"
[SUBDOMAIN-DEBUG] Links after path-based transformation:
    [
  {
    "original": "href=\"/themes/altay/theme.css\"",
    "transformed": "href=\"/favicon.ico/themes/altay/theme.css\""
  }
]
[THEME-DEBUG] Phase: post-navigation-update
[SUBDOMAIN-DEBUG] Links in HTML (post-navigation-update) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /favicon.ico/themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-navigation-update)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 65ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cache-control": "max-age=0",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=409",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/posts",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
 ‚®Ø ./src/lib/theme-service.ts:315:5
Parsing ecmascript source code failed
[0m [90m 313 |[39m         [90m// Continue with the rendering even if link processing fails[39m[0m
[0m [90m 314 |[39m       }[0m
[0m[31m[1m>[22m[39m[90m 315 |[39m     }[0m
[0m [90m     |[39m     [31m[1m^[22m[39m[0m
[0m [90m 316 |[39m     [0m
[0m [90m 317 |[39m     [90m// Add comments for debugging in HTML source[39m[0m
[0m [90m 318 |[39m     renderedHtml [33m=[39m [32m`[39m[0m

Expression expected


 ‚óã Compiling /_error ...
 ‚úì Compiled /_error in 4.2s
 GET /about 500 in 5771ms
 ‚®Ø ./src/lib/theme-service.ts:315:5
Parsing ecmascript source code failed
[0m [90m 313 |[39m         [90m// Continue with the rendering even if link processing fails[39m[0m
[0m [90m 314 |[39m       }[0m
[0m[31m[1m>[22m[39m[90m 315 |[39m     }[0m
[0m [90m     |[39m     [31m[1m^[22m[39m[0m
[0m [90m 316 |[39m     [0m
[0m [90m 317 |[39m     [90m// Add comments for debugging in HTML source[39m[0m
[0m [90m 318 |[39m     renderedHtml [33m=[39m [32m`[39m[0m

Expression expected


[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/posts
    - Hostname: demouser.localhost:3000
    - Pathname: /posts
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cache-control": "max-age=0",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=409",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/posts",
    "normalizedPath": "/posts",
    "pathSegments": [
      "posts"
    ],
    "pageType": "posts"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/posts
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /posts
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/posts
      - To pathname: /demouser/posts
      - Full new URL: http://localhost:3000/demouser/posts
 ‚úì Compiled /[username]/posts in 144ms
 ‚®Ø ./src/lib/theme-service.ts:330:3
Parsing ecmascript source code failed
[0m [90m 328 |[39m     console[33m.[39mlog([32m`[SUBDOMAIN-DEBUG] Final rendered HTML size: ${renderedHtml.length} bytes`[39m)[33m;[39m[0m
[0m [90m 329 |[39m     [36mreturn[39m renderedHtml[33m;[39m[0m
[0m[31m[1m>[22m[39m[90m 330 |[39m   } [36mcatch[39m (error) {[0m
[0m [90m     |[39m   [31m[1m^[22m[39m[0m
[0m [90m 331 |[39m     console[33m.[39merror([32m`Error rendering page ${page} with theme ${themeId}:`[39m[33m,[39m error)[33m;[39m[0m
[0m [90m 332 |[39m     [36mconst[39m errorMessage [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error[33m.[39mmessage [33m:[39m [32m'Unknown error occurred'[39m[33m;[39m[0m
[0m [90m 333 |[39m     [36mreturn[39m [32m`<h1>Error rendering page</h1><p>${errorMessage}</p>`[39m[33m;[39m[0m

Expression expected


 GET /posts 500 in 473ms
 ‚®Ø ./src/lib/theme-service.ts:330:3
Parsing ecmascript source code failed
[0m [90m 328 |[39m     console[33m.[39mlog([32m`[SUBDOMAIN-DEBUG] Final rendered HTML size: ${renderedHtml.length} bytes`[39m)[33m;[39m[0m
[0m [90m 329 |[39m     [36mreturn[39m renderedHtml[33m;[39m[0m
[0m[31m[1m>[22m[39m[90m 330 |[39m   } [36mcatch[39m (error) {[0m
[0m [90m     |[39m   [31m[1m^[22m[39m[0m
[0m [90m 331 |[39m     console[33m.[39merror([32m`Error rendering page ${page} with theme ${themeId}:`[39m[33m,[39m error)[33m;[39m[0m
[0m [90m 332 |[39m     [36mconst[39m errorMessage [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error[33m.[39mmessage [33m:[39m [32m'Unknown error occurred'[39m[33m;[39m[0m
[0m [90m 333 |[39m     [36mreturn[39m [32m`<h1>Error rendering page</h1><p>${errorMessage}</p>`[39m[33m;[39m[0m

Expression expected


[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/?debug_routing=true
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=409",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "sec-fetch-user": "?1",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/",
    "normalizedPath": "/",
    "pathSegments": [],
    "pageType": "home"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/?debug_routing=true
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
 ‚®Ø ./src/lib/theme-service.ts:332:10
Ecmascript file had an error
[0m [90m 330 |[39m [90m * Helper function to render a page with the given layout and page templates[39m[0m
[0m [90m 331 |[39m [90m */[39m[0m
[0m[31m[1m>[22m[39m[90m 332 |[39m [36mfunction[39m renderPageWithTemplate([0m
[0m [90m     |[39m          [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[0m
[0m [90m 333 |[39m   themeId[33m:[39m string[33m,[39m[0m
[0m [90m 334 |[39m   layoutTemplate[33m:[39m string[33m,[39m[0m
[0m [90m 335 |[39m   pageTemplate[33m:[39m string[33m,[39m [0m

the name `renderPageWithTemplate` is defined multiple times


 GET /?debug_routing=true 500 in 741ms
 ‚®Ø ./src/lib/theme-service.ts:332:10
Ecmascript file had an error
[0m [90m 330 |[39m [90m * Helper function to render a page with the given layout and page templates[39m[0m
[0m [90m 331 |[39m [90m */[39m[0m
[0m[31m[1m>[22m[39m[90m 332 |[39m [36mfunction[39m renderPageWithTemplate([0m
[0m [90m     |[39m          [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[0m
[0m [90m 333 |[39m   themeId[33m:[39m string[33m,[39m[0m
[0m [90m 334 |[39m   layoutTemplate[33m:[39m string[33m,[39m[0m
[0m [90m 335 |[39m   pageTemplate[33m:[39m string[33m,[39m [0m

the name `renderPageWithTemplate` is defined multiple times


 ‚úì Compiled middleware in 16ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/?debug_routing=true
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cache-control": "max-age=0",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=409",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/",
    "normalizedPath": "/",
    "pathSegments": [],
    "pageType": "home"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/?debug_routing=true
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cache-control": "max-age=0",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=409",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {
  "detectedUsername": "demouser",
  "isSubdomain": true,
  "pathInfo": {
    "originalPath": "/about",
    "normalizedPath": "/about",
    "pathSegments": [
      "about"
    ],
    "pageType": "about"
  },
  "hostInfo": {
    "hostname": "demouser.localhost:3000",
    "domainParts": [
      "demouser",
      "localhost:3000"
    ],
    "isProd": false
  }
}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
 ‚®Ø ./src/lib/theme-service.ts:332:10
Ecmascript file had an error
[0m [90m 330 |[39m [90m * Helper function to render a page with the given layout and page templates[39m[0m
[0m [90m 331 |[39m [90m */[39m[0m
[0m[31m[1m>[22m[39m[90m 332 |[39m [36mfunction[39m renderPageWithTemplate([0m
[0m [90m     |[39m          [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[0m
[0m [90m 333 |[39m   themeId[33m:[39m string[33m,[39m[0m
[0m [90m 334 |[39m   layoutTemplate[33m:[39m string[33m,[39m[0m
[0m [90m 335 |[39m   pageTemplate[33m:[39m string[33m,[39m [0m

the name `renderPageWithTemplate` is defined multiple times


 ‚óã Compiling /[username]/about ...
 GET /?debug_routing=true 500 in 706ms
 ‚®Ø ./src/lib/theme-service.ts:332:10
Ecmascript file had an error
[0m [90m 330 |[39m [90m * Helper function to render a page with the given layout and page templates[39m[0m
[0m [90m 331 |[39m [90m */[39m[0m
[0m[31m[1m>[22m[39m[90m 332 |[39m [36mfunction[39m renderPageWithTemplate([0m
[0m [90m     |[39m          [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[0m
[0m [90m 333 |[39m   themeId[33m:[39m string[33m,[39m[0m
[0m [90m 334 |[39m   layoutTemplate[33m:[39m string[33m,[39m[0m
[0m [90m 335 |[39m   pageTemplate[33m:[39m string[33m,[39m [0m

the name `renderPageWithTemplate` is defined multiple times


 ‚úì Compiled /[username]/about in 15s
 GET /about 500 in 15519ms
 ‚®Ø ./src/lib/theme-service.ts:332:10
Ecmascript file had an error
[0m [90m 330 |[39m [90m * Helper function to render a page with the given layout and page templates[39m[0m
[0m [90m 331 |[39m [90m */[39m[0m
[0m[31m[1m>[22m[39m[90m 332 |[39m [36mfunction[39m renderPageWithTemplate([0m
[0m [90m     |[39m          [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[0m
[0m [90m 333 |[39m   themeId[33m:[39m string[33m,[39m[0m
[0m [90m 334 |[39m   layoutTemplate[33m:[39m string[33m,[39m[0m
[0m [90m 335 |[39m   pageTemplate[33m:[39m string[33m,[39m [0m

the name `renderPageWithTemplate` is defined multiple times


 ‚úì Compiled middleware in 336ms
 ‚úì Compiled in 1094ms
 ‚úì Compiled middleware in 5ms
 ‚úì Compiled in 159ms
 ‚úì Compiled middleware in 50ms
 ‚úì Compiled in 197ms
 ‚úì Compiled middleware in 9ms
 ‚úì Compiled in 156ms
 ‚úì Compiled in 367ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/?debug_routing=true
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cache-control": "max-age=0",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=409",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/?debug_routing=true
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cache-control": "max-age=0",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=409",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
 ‚óã Compiling /[username] ...
 ‚úì Compiled /[username] in 870ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demouser
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: demouser.localhost:3000
    - X-Minispace-Username: demouser
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "cache-control": "max-age=0",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "navigate",
  "sec-fetch-dest": "document",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=409",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1",
  "x-minispace-original-host": "demouser.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "demouser"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demouser
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demouser
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4023 bytes
 GET /?debug_routing=true 200 in 1661ms
 ‚®Ø [Error: The default export is not a React Component in "/[username]/about/page"] {
  page: '/demouser/about'
}
 GET /about 500 in 2498ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=409",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 212ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=409",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 77ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=409",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=409",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 89ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=409",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 76ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=409",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 96ms
 ‚óã Compiling /api/debug ...
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
 ‚úì Compiled /api/debug in 2.1s
 GET /api/debug 200 in 2304ms
 GET /api/debug 200 in 28ms
 ‚úì Compiled in 9.2s
 ‚úì Compiled in 487ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cache-control": "max-age=0",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=711",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/?debug_routing=true
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=711",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/?debug_routing=true
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
 ‚úì Compiled /[username] in 104ms
 ‚®Ø [Error: The default export is not a React Component in "/[username]/about/page"] {
  page: '/demouser/about'
}
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demouser
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: demouser.localhost:3000
    - X-Minispace-Username: demouser
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "*/*",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=711",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1",
  "x-minispace-original-host": "demouser.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "demouser",
  "x-nextjs-rewritten-path": "/demouser"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demouser
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demouser
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4023 bytes
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/?debug_routing=true
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=711",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/?debug_routing=true
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
 GET /?debug_routing=true 200 in 825ms
 GET /about 500 in 960ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demouser
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: demouser.localhost:3000
    - X-Minispace-Username: demouser
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "*/*",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=711",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1",
  "x-minispace-original-host": "demouser.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "demouser",
  "x-nextjs-rewritten-path": "/demouser"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demouser
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demouser
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4023 bytes
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/?debug_routing=true
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=711",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/?debug_routing=true
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
 GET /?debug_routing=true 200 in 347ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demouser
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: demouser.localhost:3000
    - X-Minispace-Username: demouser
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "*/*",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=711",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1",
  "x-minispace-original-host": "demouser.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "demouser",
  "x-nextjs-rewritten-path": "/demouser"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demouser
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demouser
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4023 bytes
 GET /?debug_routing=true 200 in 190ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=711",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=711",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 205ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=711",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 93ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=711",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 122ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=711",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 141ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=711",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 114ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=711",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
 GET /favicon.ico 200 in 101ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=711",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 74ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
 ‚®Ø ./src/app/[username]/[...slug]/page.tsx:7:1
Module not found: Can't resolve '@/lib/user-content-service'
[0m [90m  5 |[39m [36mimport[39m { renderThemePage } [36mfrom[39m [32m'@/lib/theme-service'[39m[33m;[39m[0m
[0m [90m  6 |[39m [36mimport[39m { createNavigationContext } [36mfrom[39m [32m'@/lib/navigation-utils'[39m[33m;[39m[0m
[0m[31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { getUserData[33m,[39m getUserPageData[33m,[39m getUserTheme[33m,[39m getUserCustomPages } [36mfrom[39m [32m'@/lib/user-content-service'[39m[33m;[39m[0m
[0m [90m    |[39m [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[0m
[0m [90m  8 |[39m[0m
[0m [90m  9 |[39m [36minterface[39m [33mUserDynamicPageProps[39m {[0m
[0m [90m 10 |[39m   params[33m:[39m [33mPromise[39m[33m<[39m{ username[33m:[39m string[33m;[39m slug[33m:[39m string[] }[33m>[39m[33m;[39m[0m

Import map: aliased to relative './src/lib/user-content-service' inside of [project]/


https://nextjs.org/docs/messages/module-not-found


 ‚®Ø ./src/app/[username]/[...slug]/page.tsx:7:1
Module not found: Can't resolve '@/lib/user-content-service'
[0m [90m  5 |[39m [36mimport[39m { renderThemePage } [36mfrom[39m [32m'@/lib/theme-service'[39m[33m;[39m[0m
[0m [90m  6 |[39m [36mimport[39m { createNavigationContext } [36mfrom[39m [32m'@/lib/navigation-utils'[39m[33m;[39m[0m
[0m[31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { getUserData[33m,[39m getUserPageData[33m,[39m getUserTheme[33m,[39m getUserCustomPages } [36mfrom[39m [32m'@/lib/user-content-service'[39m[33m;[39m[0m
[0m [90m    |[39m [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[0m
[0m [90m  8 |[39m[0m
[0m [90m  9 |[39m [36minterface[39m [33mUserDynamicPageProps[39m {[0m
[0m [90m 10 |[39m   params[33m:[39m [33mPromise[39m[33m<[39m{ username[33m:[39m string[33m;[39m slug[33m:[39m string[] }[33m>[39m[33m;[39m[0m

Import map: aliased to relative './src/lib/user-content-service' inside of [project]/


https://nextjs.org/docs/messages/module-not-found


 ‚®Ø ./src/app/[username]/[...slug]/page.tsx:7:1
Module not found: Can't resolve '@/lib/user-content-service'
[0m [90m  5 |[39m [36mimport[39m { renderThemePage } [36mfrom[39m [32m'@/lib/theme-service'[39m[33m;[39m[0m
[0m [90m  6 |[39m [36mimport[39m { createNavigationContext } [36mfrom[39m [32m'@/lib/navigation-utils'[39m[33m;[39m[0m
[0m[31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { getUserData[33m,[39m getUserPageData[33m,[39m getUserTheme[33m,[39m getUserCustomPages } [36mfrom[39m [32m'@/lib/user-content-service'[39m[33m;[39m[0m
[0m [90m    |[39m [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[0m
[0m [90m  8 |[39m[0m
[0m [90m  9 |[39m [36minterface[39m [33mUserDynamicPageProps[39m {[0m
[0m [90m 10 |[39m   params[33m:[39m [33mPromise[39m[33m<[39m{ username[33m:[39m string[33m;[39m slug[33m:[39m string[] }[33m>[39m[33m;[39m[0m

Import map: aliased to relative './src/lib/user-content-service' inside of [project]/


https://nextjs.org/docs/messages/module-not-found


 ‚®Ø ./src/app/[username]/[...slug]/page.tsx:7:1
Module not found: Can't resolve '@/lib/user-content-service'
[0m [90m  5 |[39m [36mimport[39m { renderThemePage } [36mfrom[39m [32m'@/lib/theme-service'[39m[33m;[39m[0m
[0m [90m  6 |[39m [36mimport[39m { createNavigationContext } [36mfrom[39m [32m'@/lib/navigation-utils'[39m[33m;[39m[0m
[0m[31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { getUserData[33m,[39m getUserPageData[33m,[39m getUserTheme[33m,[39m getUserCustomPages } [36mfrom[39m [32m'@/lib/user-content-service'[39m[33m;[39m[0m
[0m [90m    |[39m [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[0m
[0m [90m  8 |[39m[0m
[0m [90m  9 |[39m [36minterface[39m [33mUserDynamicPageProps[39m {[0m
[0m [90m 10 |[39m   params[33m:[39m [33mPromise[39m[33m<[39m{ username[33m:[39m string[33m;[39m slug[33m:[39m string[] }[33m>[39m[33m;[39m[0m

Import map: aliased to relative './src/lib/user-content-service' inside of [project]/


https://nextjs.org/docs/messages/module-not-found


 ‚®Ø ./src/app/[username]/[...slug]/page.tsx:7:1
Module not found: Can't resolve '@/lib/user-content-service'
[0m [90m  5 |[39m [36mimport[39m { renderThemePage } [36mfrom[39m [32m'@/lib/theme-service'[39m[33m;[39m[0m
[0m [90m  6 |[39m [36mimport[39m { createNavigationContext } [36mfrom[39m [32m'@/lib/navigation-utils'[39m[33m;[39m[0m
[0m[31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { getUserData[33m,[39m getUserPageData[33m,[39m getUserTheme[33m,[39m getUserCustomPages } [36mfrom[39m [32m'@/lib/user-content-service'[39m[33m;[39m[0m
[0m [90m    |[39m [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[0m
[0m [90m  8 |[39m[0m
[0m [90m  9 |[39m [36minterface[39m [33mUserDynamicPageProps[39m {[0m
[0m [90m 10 |[39m   params[33m:[39m [33mPromise[39m[33m<[39m{ username[33m:[39m string[33m;[39m slug[33m:[39m string[] }[33m>[39m[33m;[39m[0m

Import map: aliased to relative './src/lib/user-content-service' inside of [project]/


https://nextjs.org/docs/messages/module-not-found


 ‚úì Compiled in 1431ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/?debug_routing=true
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=770",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/?debug_routing=true
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
 ‚úì Compiled /[username] in 127ms
 ‚ö† ./src/lib/navigation-utils.ts:322:46
Module not found: Can't resolve './user-content-service'
[0m [90m 320 |[39m       [36mtry[39m {[0m
[0m [90m 321 |[39m         [90m// Dynamic import to avoid circular dependencies[39m[0m
[0m[31m[1m>[22m[39m[90m 322 |[39m         [36mconst[39m { getUserCustomPages } [33m=[39m [36mawait[39m [36mimport[39m([32m'./user-content-service'[39m)[33m;[39m[0m
[0m [90m     |[39m                                              [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[0m
[0m [90m 323 |[39m         [36mif[39m (getUserCustomPages) {[0m
[0m [90m 324 |[39m           customPages [33m=[39m [36mawait[39m getUserCustomPages(context[33m.[39musername)[33m;[39m[0m
[0m [90m 325 |[39m         }[0m



https://nextjs.org/docs/messages/module-not-found


[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demouser
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: demouser.localhost:3000
    - X-Minispace-Username: demouser
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "*/*",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=770",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1",
  "x-minispace-original-host": "demouser.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "demouser",
  "x-nextjs-rewritten-path": "/demouser"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demouser
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demouser
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4023 bytes
 GET /?debug_routing=true 200 in 625ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=770",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
 ‚ö† ./src/lib/navigation-utils.ts:322:46
Module not found: Can't resolve './user-content-service'
[0m [90m 320 |[39m       [36mtry[39m {[0m
[0m [90m 321 |[39m         [90m// Dynamic import to avoid circular dependencies[39m[0m
[0m[31m[1m>[22m[39m[90m 322 |[39m         [36mconst[39m { getUserCustomPages } [33m=[39m [36mawait[39m [36mimport[39m([32m'./user-content-service'[39m)[33m;[39m[0m
[0m [90m     |[39m                                              [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[0m
[0m [90m 323 |[39m         [36mif[39m (getUserCustomPages) {[0m
[0m [90m 324 |[39m           customPages [33m=[39m [36mawait[39m getUserCustomPages(context[33m.[39musername)[33m;[39m[0m
[0m [90m 325 |[39m         }[0m



https://nextjs.org/docs/messages/module-not-found


[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=770",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 853ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
 ‚úì Compiled in 929ms
 ‚úì Compiled /[username] in 37ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=770",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cache-control": "max-age=0",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=787",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/?debug_routing=true
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=787",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/?debug_routing=true
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
 GET /favicon.ico 200 in 1465ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=770",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demouser
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: demouser.localhost:3000
    - X-Minispace-Username: demouser
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "*/*",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=787",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1",
  "x-minispace-original-host": "demouser.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "demouser",
  "x-nextjs-rewritten-path": "/demouser"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demouser
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demouser
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4023 bytes
 ‚®Ø [Error: The default export is not a React Component in "/[username]/about/page"] {
  page: '/demouser/about'
}
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/?debug_routing=true
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=787",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/?debug_routing=true
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
 GET /?debug_routing=true 200 in 387ms
 GET /favicon.ico 200 in 377ms
 GET /about 500 in 429ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=770",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demouser
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: demouser.localhost:3000
    - X-Minispace-Username: demouser
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "*/*",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=787",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1",
  "x-minispace-original-host": "demouser.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "demouser",
  "x-nextjs-rewritten-path": "/demouser"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demouser
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demouser
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4023 bytes
 GET /favicon.ico 200 in 248ms
 GET /?debug_routing=true 200 in 239ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/?debug_routing=true
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=787",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/?debug_routing=true
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=787",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demouser
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: demouser.localhost:3000
    - X-Minispace-Username: demouser
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "*/*",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=787",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1",
  "x-minispace-original-host": "demouser.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "demouser",
  "x-nextjs-rewritten-path": "/demouser"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demouser
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demouser
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4023 bytes
 GET /?debug_routing=true 200 in 412ms
 GET /favicon.ico 200 in 415ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=787",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=787",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
 GET /favicon.ico 200 in 166ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=787",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 119ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=787",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
 GET /favicon.ico 200 in 119ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=787",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 70ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=787",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 109ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
 ‚úì Compiled in 1047ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/?debug_routing=true
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=836",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/?debug_routing=true
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/about
    - Hostname: demouser.localhost:3000
    - Pathname: /about
    - Headers: {
  "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cache-control": "max-age=0",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=837",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/about",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "document",
  "sec-fetch-mode": "navigate",
  "sec-fetch-site": "same-origin",
  "upgrade-insecure-requests": "1",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/about
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /about
      - Is root path: false
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/about
      - To pathname: /demouser/about
      - Full new URL: http://localhost:3000/demouser/about
 ‚úì Compiled /[username] in 175ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demouser
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: demouser.localhost:3000
    - X-Minispace-Username: demouser
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "*/*",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=836",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1",
  "x-minispace-original-host": "demouser.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "demouser",
  "x-nextjs-rewritten-path": "/demouser"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demouser
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demouser
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4023 bytes
 ‚®Ø [Error: The default export is not a React Component in "/[username]/about/page"] {
  page: '/demouser/about'
}
 GET /?debug_routing=true 200 in 2553ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/?debug_routing=true
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=838",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/?debug_routing=true
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
 GET /about 500 in 2761ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demouser
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: demouser.localhost:3000
    - X-Minispace-Username: demouser
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "*/*",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=838",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1",
  "x-minispace-original-host": "demouser.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "demouser",
  "x-nextjs-rewritten-path": "/demouser"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demouser
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demouser
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4023 bytes
 GET /?debug_routing=true 200 in 349ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/?debug_routing=true
    - Hostname: demouser.localhost:3000
    - Pathname: /
    - Headers: {
  "accept": "*/*",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=838",
  "host": "demouser.localhost:3000",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "empty",
  "sec-fetch-mode": "cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
Middleware processing: demouser.localhost:3000/
[Middleware] Is subdomain check: demouser.localhost:3000, result: true
[SUBDOMAIN-DEBUG] Subdomain request detected:
      - Username: demouser
      - Original pathname: /
      - Is root path: true
[SUBDOMAIN-DEBUG] Rewriting URL:
      - From: http://localhost:3000/?debug_routing=true
      - To pathname: /demouser
      - Full new URL: http://localhost:3000/demouser
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/about",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=838",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: demouser
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: true
    - X-Minispace-Original-Host: demouser.localhost:3000
    - X-Minispace-Username: demouser
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "*/*",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "cors",
  "sec-fetch-dest": "empty",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=838",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1",
  "x-minispace-original-host": "demouser.localhost:3000",
  "x-minispace-path-analysis": "{\"originalPath\":\"/\",\"normalizedPath\":\"/\",\"pageType\":\"home\"}",
  "x-minispace-rewritten-from-subdomain": "true",
  "x-minispace-username": "demouser",
  "x-nextjs-rewritten-path": "/demouser"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: demouser
    - Host: demouser.localhost:3000
    - Is subdomain detected: true
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: demouser
    - Current page: home
    - Is subdomain: true
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: demouser
    - Is subdomain: true
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for demouser
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: demouser
        - Current page: home
        - Is subdomain: true
      
[THEME-DEBUG] Site context:
        - Title: Demouser
        - Username: demouser
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /
  4. /posts
  5. /about
  6. /post/welcome
  7. /post/getting-started
  8. /posts
[THEME-DEBUG] ‚úì No obvious rendering issues detected (post-render)
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4023 bytes
 GET /?debug_routing=true 200 in 1262ms
 GET /favicon.ico 200 in 905ms
[SUBDOMAIN-DEBUG] *** Middleware processing request ***
    - Full URL: http://localhost:3000/themes/altay/theme.css
    - Hostname: demouser.localhost:3000
    - Pathname: /themes/altay/theme.css
    - Headers: {
  "accept": "text/css,*/*;q=0.1",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "connection": "keep-alive",
  "cookie": "__next_hmr_refresh_hash__=838",
  "host": "demouser.localhost:3000",
  "if-modified-since": "Fri, 23 May 2025 14:19:28 GMT",
  "if-none-match": "W/\"2551-196fd8364d2\"",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "sec-ch-ua-platform": "\"macOS\"",
  "sec-fetch-dest": "style",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-site": "same-origin",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "x-forwarded-for": "::1",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http"
}
[SUBDOMAIN-DEBUG] Path analysis: {}
[SUBDOMAIN-DEBUG] Environment:
    - isProd: false
    - prodDomain: minispace.dev
    - devDomains: localhost, 127.0.0.1
    - currentDomain: localhost
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=838",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 108ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=838",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 103ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=838",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 89ms
[SUBDOMAIN-DEBUG] User profile page executing:
    - Username param: favicon.ico
    - Host header: demouser.localhost:3000
    - X-Minispace-Rewritten-From-Subdomain: not set
    - X-Minispace-Original-Host: not set
    - X-Minispace-Username: not set
    - All headers: {
  "host": "demouser.localhost:3000",
  "connection": "keep-alive",
  "sec-ch-ua-platform": "\"macOS\"",
  "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36",
  "sec-ch-ua": "\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
  "sec-ch-ua-mobile": "?0",
  "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
  "sec-fetch-site": "same-origin",
  "sec-fetch-mode": "no-cors",
  "sec-fetch-dest": "image",
  "referer": "http://demouser.localhost:3000/?debug_routing=true",
  "accept-encoding": "gzip, deflate, br, zstd",
  "accept-language": "en-US,en;q=0.9",
  "cookie": "__next_hmr_refresh_hash__=838",
  "x-forwarded-host": "demouser.localhost:3000",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "http",
  "x-forwarded-for": "::1"
}
[SUBDOMAIN-DEBUG] Creating navigation context:
    - Username: favicon.ico
    - Host: demouser.localhost:3000
    - Is subdomain detected: false
    - Original pathname: /
[SUBDOMAIN-DEBUG] Final navigation context: 
    - Username: favicon.ico
    - Current page: home
    - Is subdomain: false
[SUBDOMAIN-DEBUG] Navigation context created:
    - Username: favicon.ico
    - Is subdomain: false
    - Current page: home
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Admin DB available: false, Development mode: true
[Firebase Admin] isDevelopmentMode() called:
    - adminInitialized: development
    - NODE_ENV: development
    - result: true
  
[User Profile] Development mode - rendering demo profile for favicon.ico
[THEME-DEBUG] Phase: pre-render
[THEME-DEBUG] Rendering theme: altay
[THEME-DEBUG] Page type: home
[THEME-DEBUG] Navigation context:
        - Username: favicon.ico
        - Current page: home
        - Is subdomain: false
      
[THEME-DEBUG] Site context:
        - Title: Favicon.ico
        - Username: favicon.ico
      
[THEME-DEBUG] Phase: post-render
[SUBDOMAIN-DEBUG] Links in HTML (post-render) (first 8):
  1. https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap
  2. /themes/altay/theme.css
  3. /favicon.ico/
  4. /favicon.ico/posts
  5. /favicon.ico/about
  6. /favicon.ico/post/welcome
  7. /favicon.ico/post/getting-started
  8. /favicon.ico/posts
[THEME-DEBUG] ‚ö†Ô∏è Potential issues detected (post-render):
  1. Detected 1 root-relative links without username prefix in path-based mode: /themes/altay/theme.css
[SUBDOMAIN-DEBUG] Fixing 1 incorrect links
[SUBDOMAIN-DEBUG] Fixed link: href="/themes/altay/theme.css" -> href="/favicon.ico/themes/altay/theme.css"
[SUBDOMAIN-DEBUG] Final rendered HTML size: 4129 bytes
 GET /favicon.ico 200 in 64ms
[Firebase Admin] Starting initialization...
[Firebase Admin] Existing apps: 0
[Firebase Admin] Running in environment: development
[Firebase Admin] Request URL: unknown
[Firebase Admin] Project ID: mini-app-00
[Firebase Admin] üß™ Running in development environment - enabling development mode
